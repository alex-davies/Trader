{"version":3,"sources":["webpack:///./src/index.ts","webpack:///./src/ui/scenes/SceneManager.ts","webpack:///./src/ui/controls/DebugDraw.ts","webpack:///./src/util/Util.ts","webpack:///./src/ui/scenes/LoadScene.ts","webpack:///./src/ui/Resources.ts","webpack:///./src/engine/World.ts","webpack:///./src/engine/objectTypes/Player.ts","webpack:///./src/engine/commands/DataCleanse.ts","webpack:///./src/engine/commands/Command.ts","webpack:///./src/engine/objectTypes/Ship.ts","webpack:///./src/engine/objectTypes/Properties.ts","webpack:///./src/util/TweenGroup.ts","webpack:///./src/util/Coordinates.ts","webpack:///./src/ui/scenes/PlayScene.ts","webpack:///./src/ui/controls/StackContainer.ts","webpack:///./src/ui/controls/UIContainer.ts","webpack:///./src/ui/display/MapDisplay.ts","webpack:///./src/ui/display/tiled/TileLayerDisplay.ts","webpack:///./src/engine/objectTypes/City.ts","webpack:///./src/ui/display/CityDisplay.ts","webpack:///./src/ui/display/tiled/LayerObjectDisplay.ts","webpack:///./src/ui/display/ShipDisplay.ts","webpack:///./src/ui/display/Camera.ts","webpack:///./src/util/Interactions.ts","webpack:///./src/engine/commands/PlayerLookAt.ts","webpack:///./src/ui/menus/MenuContainer.ts","webpack:///./src/ui/menus/CityMenu.ts","webpack:///./src/engine/commands/CityHarvest.ts","webpack:///./src/engine/objectTypes/Resource.ts","webpack:///./src/ui/controls/UIText.ts","webpack:///./src/ui/controls/AlignContainer.ts","webpack:///./src/ui/controls/UISprite.ts","webpack:///./src/ui/controls/UINinePatchButton.ts","webpack:///./src/ui/controls/NinePatch.ts","webpack:///./src/engine/commands/ShipBuyResource.ts","webpack:///./src/ui/controls/PaddedContainer.ts","webpack:///./src/ui/display/overlay/ShipPathOverlay.ts","webpack:///./src/engine/commands/ShipMove.ts","webpack:///./src/ui/display/overlay/ShipTravelPointsOverlay.ts"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["import {SceneManager} from \"./ui/scenes/SceneManager\";\r\nimport LoadScene from \"./ui/scenes/LoadScene\";\r\nimport PlayScene from \"./ui/scenes/PlayScene\";\r\nimport DebugScene from \"./ui/scenes/NinePatchDebugScene\";\r\nimport StackContainerDebugScene from \"./ui/scenes/StackContainerDebugScene\";\r\n\r\nvar container = document.createElement(\"section\");\r\ncontainer.style.width = \"100%\";\r\ncontainer.style.height = \"100%\";\r\ndocument.body.appendChild(container);\r\n\r\nvar sceneManager = new SceneManager(container);\r\n\r\n//sceneManager.setScene(new StackContainerDebugScene());\r\n\r\n\r\nsceneManager.setScene(new LoadScene((resources)=>{\r\n    sceneManager.setScene(new PlayScene(resources));\r\n}));\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import * as PIXI from 'pixi.js'\r\nimport Util from \"../../util/Util\";\r\nimport DebugDraw from \"../controls/DebugDraw\";\r\nimport * as TWEEN from \"tween.js\";\r\nimport InteractionManager = PIXI.interaction.InteractionManager;\r\n\r\nexport class SceneManager{\r\n\r\n    public renderer:PIXI.WebGLRenderer | PIXI.CanvasRenderer;\r\n    private currentScene : PIXI.Container;\r\n    private container: PIXI.Container;\r\n\r\n    constructor(private htmlContainer:HTMLElement){\r\n        this.renderer = PIXI.autoDetectRenderer(htmlContainer.clientWidth, htmlContainer.clientHeight, {antialias:true});\r\n        this.renderer.backgroundColor = 0xFF0000;\r\n        htmlContainer.appendChild(this.renderer.view);\r\n\r\n        //Hack: interaction data objects are reused making it difficult to store info on them\r\n        //this is a hack to remove the \"selection\" property on every click so it can be used\r\n        //by the rest of hte system to bubble what has been clicked in\r\n        // let plugins = ((<any>this.renderer).plugins);\r\n        // let interactionManager = (<InteractionManager>plugins.interaction);\r\n        // let clearData = function(displayObject, eventString, eventData){\r\n        //     debugger;\r\n        //     delete (<any>interactionManager.eventData.data).selection;\r\n        // }\r\n        // this.interceptBefore(interactionManager, \"onMouseUp\",clearData)\r\n        // this.interceptBefore(interactionManager, \"onMouseDown\",clearData)\r\n        // interactionManager.setTargetElement(interactionManager.interactionDOMElement, interactionManager.resolution);\r\n\r\n\r\n        this.container = new PIXI.Container();\r\n        this.container.addChild(DebugDraw.Global)\r\n\r\n        this.animate();\r\n\r\n        window.addEventListener('resize', ()=>{\r\n            if(htmlContainer.clientWidth != this.renderer.width\r\n                || htmlContainer.clientHeight != this.renderer.height){\r\n                this.renderer.resize(htmlContainer.clientWidth, htmlContainer.clientHeight);\r\n                this.setScene(this.currentScene);\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    public setScene(scene:PIXI.Container){\r\n        this.container.removeChild(this.currentScene);\r\n        this.currentScene = this.container.addChildAt(scene,0) as PIXI.Container;\r\n        scene.width = this.renderer.width;\r\n        scene.height = this.renderer.height;\r\n        //Util.TrySetRenderRect(scene, {x:0,y:0,width:this.renderer.width, height:this.renderer.height});\r\n    }\r\n\r\n    animate() {\r\n            TWEEN.update();\r\n            this.renderer.render(this.container);\r\n        window.requestAnimationFrame( ()=>this.animate() );\r\n    }\r\n\r\n    interceptBefore(target:Object, method:string, intercept:(...args:any[])=>void){\r\n        let originalMethod = target[method];\r\n        target[method] = function(){\r\n            intercept.apply(this,arguments);\r\n            originalMethod.apply(this, arguments);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/scenes/SceneManager.ts","import Util from \"../../util/Util\";\r\n\r\ninterface DebugObject{\r\n    displayObject:PIXI.DisplayObject;\r\n    color:number;\r\n}\r\n\r\nexport default class DebugDraw extends PIXI.Container{\r\n    static Global:DebugDraw = new DebugDraw();\r\n\r\n    graphics:PIXI.Graphics;\r\n    debugObjects:DebugObject[] = [];\r\n\r\n    constructor(){\r\n        super();\r\n\r\n        this.graphics = this.addChild(new PIXI.Graphics());\r\n\r\n        PIXI.ticker.shared.add(this.redraw.bind(this));\r\n    }\r\n\r\n    // getLocalBounds(){\r\n    //\r\n    //     return new PIXI.Rectangle(0,0,0,0);\r\n    // }\r\n\r\n    redraw(){\r\n        this.graphics.clear();\r\n        this.debugObjects.forEach((obj,i)=>{\r\n\r\n            if(!this.isRelatedToDebugDraw(obj.displayObject)){\r\n                this.debugObjects.slice(i,1);\r\n                return;\r\n            }\r\n\r\n            var bounds = obj.displayObject.getBounds();\r\n\r\n            var p1 = this.toLocal(new PIXI.Point(bounds.x,bounds.y), obj.displayObject);\r\n            var p2 = this.toLocal(new PIXI.Point(bounds.x + bounds.width,bounds.y+bounds.height), obj.displayObject);\r\n\r\n            this.graphics.lineStyle(2,obj.color, 1);\r\n            this.graphics.drawRect(p1.x, p1.y, p2.x - p1.x, p2.y-p1.y);\r\n        })\r\n    }\r\n\r\n    drawBounds(displayObject:PIXI.DisplayObject, color:number = this.defaultColor(displayObject)){\r\n        let debugObj = {\r\n            displayObject:displayObject,\r\n            color:color\r\n        };\r\n\r\n        this.debugObjects.push(debugObj);\r\n    }\r\n\r\n    isRelatedToDebugDraw(item:PIXI.DisplayObject){\r\n        let thisAncestors = DebugDraw.getAncestors(this);\r\n        let itemAncestors = DebugDraw.getAncestors(item);\r\n\r\n        for(let i=0;i<thisAncestors.length;i++){\r\n            if(itemAncestors.indexOf(thisAncestors[i]) >= 0)\r\n                return true;\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    static getAncestors(item:PIXI.DisplayObject):PIXI.DisplayObject[]{\r\n        let ancestors = [];\r\n        let currentItem = item;\r\n        while(currentItem = currentItem.parent) {\r\n            ancestors.push(currentItem);\r\n        }\r\n        return ancestors;\r\n    }\r\n\r\n    static DrawBounds(displayObject:PIXI.DisplayObject, color?:number){\r\n        DebugDraw.Global.drawBounds(displayObject, color);\r\n    }\r\n\r\n    private defaultColor(obj:any){\r\n        let constructorName = Util.FunctionName(obj.constructor) || \"\";\r\n        let hashedName = Util.HashCodeString(constructorName);\r\n        let color = Math.abs(hashedName % 16777216);\r\n        return color;\r\n\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/controls/DebugDraw.ts","export interface XY{\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport interface Dimension{\r\n    width:number;\r\n    height:number;\r\n}\r\n\r\nexport interface Rect{\r\n    x: number;\r\n    y: number;\r\n    width:number;\r\n    height:number;\r\n}\r\n\r\n\r\n\r\n\r\nexport default class Util{\r\n\r\n    static EmptyObject = {};\r\n\r\n    static constrain(input:number, min:number, max:number){\r\n        return Math.max(Math.min(input, max), min);\r\n    }\r\n\r\n    static DegToRad(degrees:number){\r\n        return degrees / 180 * Math.PI;\r\n    }\r\n\r\n    static RadToDeg(radians:number){\r\n        return radians / Math.PI * 180;\r\n    }\r\n    \r\n    // static TryResize(target:any, width:number, height:number){\r\n    //     Util.TryCall(target, \"resize\", width, height);\r\n    // }\r\n\r\n    static TrySetRenderRect(target:any, rect:{x:number, y:number, width:number, height:number}){\r\n        Util.TryCall(target, \"setRenderRect\", rect);\r\n    }\r\n\r\n    static TryCall(target:any, method:string, ...args:any[]):any{\r\n        if(!target)\r\n            return;\r\n        let fn = target[method];\r\n        if(typeof fn === \"function\"){\r\n            return fn.apply(target, args);\r\n        }\r\n    }\r\n\r\n\r\n    static FunctionName(fn: Function){\r\n        if((<any>fn).name)\r\n            return (<any>fn).name;\r\n\r\n        //fallback for older JS which doesnt have a name proeprty\r\n        var funcNameRegex = /function (.{1,})\\(/;\r\n        var results = (funcNameRegex).exec(fn.toString());\r\n        if(results && results.length>1)\r\n            return results[1];\r\n        throw new Error(\"function does not have a name\")\r\n    }\r\n\r\n    static HashCodeString(str:string) {\r\n        var hash = 0, i, chr, len;\r\n        if (str.length == 0) return hash;\r\n        for (i = 0, len = str.length; i < len; i++) {\r\n            chr   = str.charCodeAt(i);\r\n            hash  = ((hash << 5) - hash) + chr;\r\n            hash |= 0; // Convert to 32bit integer\r\n        }\r\n        return hash;\r\n    };\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/Util.ts","import * as PIXI from 'pixi.js'\r\nimport Resources from \"../Resources\";\r\nimport World from \"../../engine/World\";\r\nimport DebugDraw from \"../controls/DebugDraw\";\r\nimport {NinePatchButton} from \"../Resources\";\r\nimport {ImageButton} from \"../Resources\";\r\n\r\nexport default class LoadScene extends PIXI.Container{\r\n    private loadingSprite:PIXI.Sprite;\r\n    private renderRect:{x:number,y:number,width:number,height:number};\r\n    public minimumLoadingPageShown = 1000;\r\n    public skipLoadingPageTimeout = 200;\r\n\r\n    constructor(loaded:(Resources)=>void){\r\n        super();\r\n\r\n        //some quick loading to show a nice loading screen\r\n        PIXI.loader.add('loadingImage','/assets/loading.png').load((loader, loadedResources)=>{\r\n\r\n            //we will show the page soon, we dont show it immediatly as our loading might\r\n            //be very quick, and we dont want to show the loading page unless we have to\r\n            var pageIsShown = false;\r\n            var showPageTimeout = setTimeout(()=>{\r\n                this.loadingSprite = new PIXI.Sprite(loadedResources.loadingImage.texture);\r\n                this.loadingSprite.anchor.set(0.5,0.5);\r\n                this.addChild(this.loadingSprite);\r\n\r\n                this.setRenderRect(this.renderRect); //resize to position our sprite\r\n                pageIsShown = true;\r\n            },this.skipLoadingPageTimeout)\r\n\r\n\r\n\r\n            var startTime = new Date().getTime();\r\n\r\n            //now we start loading the real content\r\n            PIXI.loader\r\n                .add('gameState', '/assets/maps/demo.json')\r\n                .add('menuBackground', '/assets/images/backgrounds/parchment.png')\r\n                .add('menuBorder', '/assets/images/backgrounds/shadow.png')\r\n                .add('squareButtonUp', '/assets/images/ui/square-buySellButton.9.png')\r\n                .add('squareButtonDown', '/assets/images/ui/square-buySellButton-down.9.png')\r\n                .add('moveButtonUp', '/assets/images/ui/move-button-up.png')\r\n                .add('moveButtonDown', '/assets/images/ui/move-button-down.png')\r\n                .load((loader, loadedResources)=> {\r\n\r\n                var resources = new Resources();\r\n                resources.world = new World(loadedResources.gameState.data);\r\n                resources.menuBackground = loadedResources.menuBackground.texture;\r\n                resources.menuBorder = loadedResources.menuBorder.texture;\r\n                resources.buySellButton = new NinePatchButton(\r\n                    loadedResources.squareButtonUp.texture,\r\n                    loadedResources.squareButtonDown.texture\r\n                );\r\n                resources.moveButton = new ImageButton(\r\n                    loadedResources.moveButtonUp.texture,\r\n                    loadedResources.moveButtonDown.texture\r\n                );\r\n\r\n\r\n                    \r\n                    \r\n                    \r\n\r\n                //we now know the tilests, so we will load each of hte tilesets\r\n                var baseDirectory = '/assets/maps/';\r\n                resources.world.state.tilesets.forEach(tileset=>{\r\n                    PIXI.loader.add(tileset.name,baseDirectory + tileset.image);\r\n                });\r\n\r\n\r\n                PIXI.loader.load((loader, loadedResources)=>{\r\n\r\n                    resources.world.state.tilesets.forEach(tileset=>{\r\n                        resources.tileSets[tileset.name] = loadedResources[tileset.name].texture\r\n                    });\r\n\r\n                    resources.tileTextures = this.generateTileMap(resources);\r\n                    resources.cityIcon = resources.tileTextures[21];\r\n\r\n                    var endTime = new Date().getTime();\r\n                    var elapsedTime = endTime-startTime;\r\n                    console.debug('Loaded resources in '+elapsedTime+'ms',loadedResources);\r\n\r\n                    clearTimeout(showPageTimeout)\r\n\r\n\r\n\r\n\r\n\r\n                    if(pageIsShown){\r\n                        //if we have started showing the page we have to show it for the minimum time\r\n                        var additionalWait = Math.max(0, this.minimumLoadingPageShown - elapsedTime);\r\n                        setTimeout(()=>{\r\n                            loaded(resources);\r\n                        }, additionalWait);\r\n                    }\r\n                    else{\r\n                        console.debug('resources loaded fast, will not show the loading page')\r\n                        loaded(resources);\r\n                    }\r\n                });\r\n            });\r\n\r\n\r\n        });\r\n    }\r\n\r\n    public setRenderRect(rect:{x:number, y:number, width:number, height:number}){\r\n        this.renderRect = rect;\r\n        if(this.loadingSprite != null) {\r\n\r\n            this.loadingSprite.x = rect.width /2;\r\n            this.loadingSprite.y = rect.height /2;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    generateTileMap(resources:Resources):{[gid:number]:PIXI.Texture}{\r\n        var tileMap:{[gid:number]:PIXI.Texture} = {};\r\n\r\n        resources.world.state.tilesets.forEach(tileset=>{\r\n            var baseTexture = resources.tileSets[tileset.name];\r\n            PIXI.Texture\r\n            baseTexture.scaleMode = PIXI.SCALE_MODES.NEAREST;\r\n\r\n            var subImageIndex = 0;\r\n            for(var y=tileset.margin\r\n                ; y+tileset.tileheight <= tileset.imageheight\r\n                ; y+=tileset.tileheight+tileset.spacing) {\r\n\r\n                for (var x = tileset.margin\r\n                    ; x + tileset.tilewidth <= tileset.imagewidth\r\n                    ; x += tileset.tilewidth + tileset.spacing) {\r\n\r\n                    var subImageRectangle = new PIXI.Rectangle(x,y,tileset.tilewidth, tileset.tileheight);\r\n                    tileMap[tileset.firstgid+subImageIndex] = new PIXI.Texture(baseTexture, subImageRectangle);\r\n\r\n                    subImageIndex++;\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        return tileMap;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/scenes/LoadScene.ts","import World from \"../engine/World\";\r\nimport DebugDraw from \"./controls/DebugDraw\";\r\n\r\nexport class NinePatchButton{\r\n    constructor(public up:PIXI.Texture, public down:PIXI.Texture = up, public hover:PIXI.Texture = up){}\r\n}\r\n\r\nexport class ImageButton{\r\n    constructor(public up:PIXI.Texture, public down:PIXI.Texture = up, public hover:PIXI.Texture = up){}\r\n}\r\n\r\nexport default class Resources{\r\n    world:World;\r\n    tileSets:{ [name:string]:PIXI.BaseTexture} = {};\r\n    tileTextures:{[gid:number]:PIXI.Texture};\r\n\r\n    menuBackground:PIXI.Texture;\r\n    menuBorder:PIXI.Texture;\r\n\r\n    cityIcon:PIXI.Texture;\r\n\r\n    buySellButton:NinePatchButton;\r\n    moveButton:ImageButton;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Resources.ts","import Event from \"../util/Event\";\r\nimport {Command} from './commands/Command';\r\nimport {PlayerType, Player} from \"./objectTypes/Player\";\r\nimport {CityType, City, CityUtil} from \"./objectTypes/City\";\r\nimport {Rect, default as Util} from \"../util/Util\";\r\nimport * as Linq from \"linq\"\r\nimport {Properties} from \"./objectTypes/Properties\";\r\nimport CityHarvest from \"./commands/CityHarvest\";\r\nimport EventEmitter = require(\"eventemitter3\");\r\nimport DataCleanse from \"./commands/DataCleanse\";\r\nimport {TileProperties} from \"./objectTypes/TileProperties\";\r\nimport {ShipUtil, Ship} from \"./objectTypes/Ship\";\r\nimport TweenGroup from \"../util/TweenGroup\";\r\nimport {XYUtil} from \"../util/Coordinates\";\r\n\r\nexport default class World {\r\n\r\n    public commandIssuingDepth = 0;\r\n    public tickNumber:number = 0;\r\n    public clock = new Clock();\r\n    private commandEmitter = new EventEmitter();\r\n    public tweens:TweenGroup = new TweenGroup();\r\n    \r\n    constructor(public state:Tiled.Map){\r\n        this.clock.every(2000, ()=>{\r\n           //this.issueCommand(new CityHarvest());\r\n        });\r\n\r\n        // this.clock.every(50, ()=>{\r\n        //     this.objectsOfType<Ship>(ShipUtil.TypeName).forEach(ship=>{\r\n        //         let targetPoint = this.getTilePoint(ship.properties.moveToTileIndex);\r\n        //\r\n        //         ship.x += Math.max(-1,Math.min(1, targetPoint.x - ship.x));\r\n        //         ship.y += Math.max(-1,Math.min(1, targetPoint.y - ship.y));\r\n        //\r\n        //         if(targetPoint.x === ship.x && targetPoint.y === ship.y)\r\n        //             ship.properties.moveToTileIndex = null;\r\n        //     });\r\n        // })\r\n\r\n\r\n        this.issueCommand(new DataCleanse());\r\n    }\r\n    \r\n    \r\n    public player():Player{\r\n        var existingPlayer = this.objectOfType<Player>(PlayerType);\r\n        if(existingPlayer){\r\n            return existingPlayer\r\n        }\r\n    }\r\n\r\n    public objectWithId<T extends Tiled.LayerObject>(id:number):T{\r\n        return Linq.from(this.state.layers)\r\n            .where(layer=>layer.type === \"objectgroup\")\r\n            .selectMany(layer=><T[]>layer.objects)\r\n            .firstOrDefault(obj=>obj.id === id)\r\n    }\r\n\r\n    public objectsOfType<T extends Tiled.LayerObject>(type:string) : Linq.IEnumerable<T>{\r\n        return Linq.from(this.state.layers)\r\n            .where(layer=>layer.type === \"objectgroup\")\r\n            .selectMany(layer=><T[]>layer.objects)\r\n            .where(obj=>obj.type === type)\r\n    }\r\n\r\n    public objectOfType<T extends Tiled.LayerObject>(type:string):T{\r\n        return this.objectsOfType<T>(type).firstOrDefault();\r\n    }\r\n\r\n    public tileLayers(){\r\n        return Linq.from(this.state.layers).where(layer=>layer.type === \"tilelayer\")\r\n    }\r\n\r\n\r\n    public getNeighbourIndexes(tileIndex:number){\r\n        var neighbours = [];\r\n\r\n        var currentRow = Math.floor(tileIndex / this.state.width);\r\n        var currentCol = tileIndex  % this.state.width;\r\n\r\n        var fromRow = Math.max(currentRow -1, 0);\r\n        var toRow = Math.min(currentRow+1, this.state.height-1);\r\n        var fromCol = Math.max(currentCol-1,0);\r\n        var toCol = Math.min(currentCol+1,this.state.width-1);\r\n\r\n        for(let row = fromRow; row<=toRow; row++){\r\n            for(let col = fromCol; col<=toCol; col++){\r\n                if(!(row == currentRow && col == currentCol))\r\n                    neighbours.push(this.state.width * row + col);\r\n            }\r\n        }\r\n\r\n        return neighbours;\r\n    }\r\n\r\n    public getExtendedNeighbours(startTileIndex:number, segmentPredicate:(tileIndex:number)=>boolean):Linq.IEnumerable<number>{\r\n        var processedIndexes:{[index:number]:boolean} = {};\r\n        var toProcessIndexes = [startTileIndex];\r\n        var partOfSegment = [];\r\n\r\n        while(toProcessIndexes.length > 0){\r\n            let toProcessIndex = toProcessIndexes.pop();\r\n            if(processedIndexes[toProcessIndex])\r\n                continue;\r\n\r\n            processedIndexes[toProcessIndex] = true;\r\n\r\n            if(!segmentPredicate(toProcessIndex))\r\n                continue;\r\n\r\n            partOfSegment.push(toProcessIndex);\r\n            toProcessIndexes.push.apply(toProcessIndexes, this.getNeighbourIndexes(toProcessIndex))\r\n        }\r\n\r\n        return Linq.from(partOfSegment);\r\n    }\r\n\r\n    getTileIndex(point:{x:number, y:number, width?:number, height?:number}){\r\n        point = {\r\n            x: point.x + (point.width || 0)/2,\r\n            y: point.y - (point.height || 0)/2\r\n        }\r\n        var row = Math.floor(point.y / this.state.tileheight);\r\n        var col = Math.floor(point.x / this.state.tilewidth);\r\n\r\n        return this.state.width * row + col;\r\n    }\r\n\r\n    getTilePoint(tileIndex:number){\r\n        let row = Math.floor(tileIndex / this.state.width);\r\n        let col = tileIndex % this.state.width;\r\n        return {\r\n            x:col * this.state.tilewidth + this.state.tilewidth/2,\r\n            y:row * this.state.tileheight + this.state.tileheight/2\r\n        }\r\n    }\r\n\r\n\r\n\r\n    getTileIndexesInRect(rect:Rect){\r\n        var startTilePosition = {\r\n            x:Math.round(rect.x / this.state.tilewidth),\r\n            y:Math.round(rect.y / this.state.tileheight)\r\n        };\r\n\r\n        var endTilePosition = {\r\n            x:Math.round((rect.x + rect.width) / this.state.tilewidth),\r\n            y:Math.round((rect.y + rect.height) / this.state.tileheight)\r\n        };\r\n\r\n        var result = [];\r\n        for(var row = startTilePosition.y;row<endTilePosition.y;row++) {\r\n            for (var col = startTilePosition.x; col < endTilePosition.x; col++) {\r\n                result.push(this.state.width * row + col);\r\n            }\r\n        }\r\n\r\n        return Linq.from(result);\r\n    }\r\n\r\n\r\n\r\n    public getTilePropertiesFromIndex<T>(layer:Tiled.Layer, tileIndex:number):T{\r\n        return this.getTilePropertiesFromGid<T>(layer.data[tileIndex])\r\n    }\r\n\r\n    public getTilePropertiesFromGid<T>(gid:number):T{\r\n        //TODO: this gets called a lot, should cache gid->properties\r\n        \r\n        var tilesetsWithGid = Linq.from(this.state.tilesets).where(tileset=> tileset.tileproperties && tileset.tileproperties.hasOwnProperty(gid-tileset.firstgid+\"\"))\r\n\r\n        return Linq.from(this.state.tilesets)\r\n            .where(tileset=> tileset.tileproperties && tileset.tileproperties.hasOwnProperty(gid-tileset.firstgid+\"\"))\r\n            .select(tileset=><T>tileset.tileproperties[gid-tileset.firstgid+\"\"])\r\n            .firstOrDefault() || <T>{};\r\n    }\r\n\r\n    public getGidStack(tileIndex:number){\r\n        return this.tileLayers().select(layer=>{\r\n            return layer.data[tileIndex];\r\n        }).where(gid=>gid!==0);\r\n    }\r\n\r\n    findPointRoute(start:{x:number,y:number}, end:{x:number,y:number},canTravelOnTileIndex:(tileIndex:number)=>boolean):{path:{x:number,y:number}[], distance:number}{\r\n        let startTile = this.getTileIndex(start);\r\n        let endTile = this.getTileIndex(end);\r\n\r\n        let tileRoute = this.findTileRoute(startTile,endTile, canTravelOnTileIndex);\r\n        let tilePath = tileRoute.path;\r\n        let distance = tileRoute.distance;\r\n\r\n        //no path can be found\r\n        if(tilePath.length == 0){\r\n            return {path:[],distance:0}\r\n        }\r\n\r\n        //we will do some smart adjustment we do not need to go to the first tile if it is not on the way\r\n        if(tilePath.length >= 2){\r\n\r\n            //if its shorter to move from start to second tile than move to first then second we will do the shorter\r\n            let firstTilePoint = this.getTilePoint(tilePath[0]);\r\n            let secondTilePoint = this.getTilePoint(tilePath[1]);\r\n            let distStartToFirstTile = XYUtil.distance(start, firstTilePoint);\r\n            let distStartToSecondTile = XYUtil.distance(start, secondTilePoint);\r\n            let distFirstTileToSecondTile = XYUtil.distance(firstTilePoint, secondTilePoint);\r\n\r\n            if(distStartToSecondTile < distStartToFirstTile + distFirstTileToSecondTile) {\r\n                tilePath.shift();\r\n                distance -= distFirstTileToSecondTile;\r\n            }\r\n\r\n            //if its shorter to go from second last tile to end, we will do that rather than go through last tile\r\n            let lastTilePoint = this.getTilePoint(tilePath[tilePath.length-1]);\r\n            let secondLastTilePoint = this.getTilePoint(tilePath[tilePath.length-2]);\r\n            let distEndToLastTile = XYUtil.distance(end, lastTilePoint);\r\n            let distEndToSecondLastTile = XYUtil.distance(end, secondLastTilePoint);\r\n            let distLastTileToSecondLastTile = XYUtil.distance(lastTilePoint, secondLastTilePoint);\r\n\r\n            if(distEndToSecondLastTile < distEndToLastTile + distLastTileToSecondLastTile) {\r\n                tilePath.pop();\r\n                distance -= distLastTileToSecondLastTile;\r\n            }\r\n        }\r\n\r\n\r\n        let pointPath = tilePath.map(ti=>this.getTilePoint(ti));\r\n\r\n        //make sure our start and end points are part of the path\r\n        if(!XYUtil.equals(pointPath[0], start)){\r\n            pointPath.unshift({x:start.x,y:start.y});\r\n            distance += XYUtil.distance(pointPath[0], start);\r\n        }\r\n        if(!XYUtil.equals(pointPath[pointPath.length-1], end)){\r\n            pointPath.push({x:end.x,y:end.y});\r\n            distance += XYUtil.distance(pointPath[pointPath.length-1], end);\r\n        }\r\n\r\n        return {\r\n            path:pointPath,\r\n            distance:distance\r\n        }\r\n\r\n    }\r\n\r\n    findTileRoute(startTileIndex:number, endTileIndex:number, canTravelOnTileIndex:(tileIndex:number)=>boolean):{path:number[],distance:number}{\r\n        let distance = (tileIndex1:number, tileIndex2:number)=>{\r\n            let p1 = this.getTilePoint(tileIndex1);\r\n            let p2 = this.getTilePoint(tileIndex2);\r\n            return XYUtil.distance(p1,p2);\r\n        }\r\n\r\n        let open = [startTileIndex];\r\n        let closed = [];\r\n\r\n        //g_score is actual distance from start to that tile\r\n        let g_score:{[tileIndex:number]:number}={};\r\n        g_score[startTileIndex] = 0;\r\n\r\n        //f_score is the estimated liklihood this is on the correct path. its made from\r\n        //the distance from start to that tile plus estimation of that tile to the end\r\n        let f_score:{[tileIndex:number]:number}={};\r\n        f_score[startTileIndex] = g_score[startTileIndex] + distance(startTileIndex, endTileIndex);\r\n\r\n        let came_from:{[tileIndex:number]:number}={};\r\n\r\n        while(open.length > 0){\r\n\r\n            //find the node that has the lowest f-score, i.e. will\r\n            //be the most likely to lead to the shortest part\r\n            let lowest_index = 0;\r\n            let lowest_node = open[lowest_index];\r\n            let lowest_f_score = f_score[lowest_node];\r\n            for(let i=1;i<open.length;i++) {\r\n                let current_node = open[i];\r\n                let current_f_score = f_score[current_node];\r\n                if(lowest_f_score > current_f_score){\r\n                    lowest_index = i;\r\n                    lowest_f_score = current_f_score;\r\n                    lowest_node = current_node;\r\n                }\r\n            }\r\n            let current_node = lowest_node;\r\n\r\n            //close our node\r\n            open.splice(lowest_index, 1);\r\n            closed.push(lowest_node);\r\n\r\n            //if we cant travel on this node, forget about it\r\n            if(!canTravelOnTileIndex(lowest_node))\r\n                continue;\r\n\r\n            //if we have reached the end node, we are done, we just need\r\n            //to rebuild the path\r\n            if(current_node === endTileIndex){\r\n                var path = [lowest_node];\r\n                var source = came_from[lowest_node];\r\n                while(source){\r\n                    path.push(source);\r\n                    source = came_from[source];\r\n                }\r\n                path.reverse();\r\n                return {\r\n                    path:path,\r\n                    distance:g_score[current_node]\r\n                };\r\n            }\r\n\r\n\r\n            this.getNeighbourIndexes(current_node).forEach(neighbour=>{\r\n                //don't touch nodes we have processed before\r\n                if(closed.indexOf(neighbour) != -1)\r\n                    return;\r\n\r\n                var tentative_g_score = g_score[current_node] + distance(current_node, neighbour);\r\n\r\n                if(open.indexOf(neighbour) === -1){\r\n                    open.push(neighbour)\r\n                }\r\n                else if(tentative_g_score >= g_score[neighbour]){\r\n                    return; //this is not a better path\r\n                }\r\n\r\n                came_from[neighbour] = current_node;\r\n                g_score[neighbour] = tentative_g_score;\r\n                f_score[neighbour] = tentative_g_score + distance(current_node, neighbour);\r\n            });\r\n        }\r\n\r\n        return {\r\n            path:[],\r\n            distance:0\r\n        };\r\n    }\r\n\r\n    // findPath(sourceMarkerIds:string[], targetMarkerId:string):string[]{\r\n    //\r\n    //     var open = sourceMarkerIds;\r\n    //\r\n    //     var came_from = {};\r\n    //\r\n    //     var g_score = {};\r\n    //     for(var i=0;i<sourceMarkerIds.length;i++){\r\n    //         g_score[sourceMarkerIds[i]] = 0;\r\n    //     }\r\n    //\r\n    //     var f_score = {};\r\n    //     for(var i=0;i<sourceMarkerIds.length;i++) {\r\n    //         f_score[sourceMarkerIds[i]]= g_score[sourceMarkerIds[i]] + this.distance(sourceMarkerIds[i], targetMarkerId);\r\n    //     }\r\n    //\r\n    //\r\n    //     var closedSet = [];\r\n    //\r\n    //     while(open.length > 0){\r\n    //\r\n    //         var lowest_index = 0;\r\n    //         var lowest_node = open[lowest_index];\r\n    //         var lowest_f_score = f_score[lowest_node];\r\n    //\r\n    //         for(var i=1;i<open.length;i++) {\r\n    //             var current_node = open[i];\r\n    //             var current_f_score = f_score[current_node];\r\n    //             if(lowest_f_score > current_f_score){\r\n    //                 lowest_index = i;\r\n    //                 lowest_f_score = current_f_score;\r\n    //                 lowest_node = current_node;\r\n    //             }\r\n    //         }\r\n    //\r\n    //         if(lowest_node == targetMarkerId){\r\n    //             var path = [lowest_node];\r\n    //             var source = came_from[lowest_node];\r\n    //             while(source){\r\n    //                 path.push(source);\r\n    //                 source = came_from[source];\r\n    //             }\r\n    //             path.reverse();\r\n    //             return path;\r\n    //         }\r\n    //\r\n    //         open.splice(lowest_index, 1);\r\n    //         closedSet.push(lowest_node);\r\n    //\r\n    //         var neighbours = this.neighbours(lowest_node)\r\n    //         for(var i=0;i<neighbours.length;i++){\r\n    //             var neighbour = neighbours[i];\r\n    //\r\n    //             //dont touch nodes we have processed before\r\n    //             if(closedSet.indexOf(neighbour) != -1)\r\n    //                 continue;\r\n    //\r\n    //             var tentative_g_score = g_score[current_node] + this.distance(lowest_node, neighbour);\r\n    //\r\n    //             if(open.indexOf(neighbour) === -1){\r\n    //                 open.push(neighbour)\r\n    //             }\r\n    //             else if(tentative_g_score >= g_score[neighbour]){\r\n    //                 continue; //this is not a better path\r\n    //             }\r\n    //\r\n    //             came_from[neighbour] = lowest_node;\r\n    //             g_score[neighbour] = tentative_g_score;\r\n    //             f_score[neighbour] = tentative_g_score + this.distance(lowest_node, neighbour);\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n\r\n\r\n    isIndexPartOfCity(tileIndex:number){\r\n        return this.getGidStack(tileIndex)\r\n            .select(gid=>this.getTilePropertiesFromGid<TileProperties>(gid))\r\n            .any(prop=>prop.isPartOfCity);\r\n    }\r\n\r\n    isMovementAllowed(tileIndex:number){\r\n        return this.getGidStack(tileIndex)\r\n            .select(gid=>this.getTilePropertiesFromGid<TileProperties>(gid))\r\n            .all(prop=>prop.allowMovement);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    public onCommand<T>(clazz: {new (...args : any[]): T, prototype: Command; }, callback:(command:T)=>void, context?:any){\r\n\r\n        var typeName = Util.FunctionName(<any>clazz);\r\n        this.commandEmitter.on(typeName, callback, context);\r\n    }\r\n\r\n    public offCommand<T>(clazz: {new (...args : any[]): T, prototype: Command; }, callback:(command:T)=>void, context?:any){\r\n\r\n        var typeName = Util.FunctionName(<any>clazz);\r\n        this.commandEmitter.off(typeName, callback, context);\r\n\r\n    }\r\n\r\n    public onCommands(clazzes: {new (...args : any[]): any, prototype: Command; }[], callback:(command:Command)=>void, context?:any){\r\n        clazzes.forEach(clazz=>this.onCommand(clazz,callback, context));\r\n    }\r\n\r\n    public offCommands(clazzes: {new (...args : any[]): any, prototype: Command; }[], callback:(command:Command)=>void, context?:any){\r\n        clazzes.forEach(clazz=>this.offCommand(clazz,callback, context));\r\n    }\r\n\r\n\r\n    public issueCommand(...commands: Command[]){\r\n\r\n        for(var i=0;i<commands.length;i++){\r\n            var command = commands[i];\r\n\r\n            console.debug(Array(this.commandIssuingDepth).join(\">\") + 'executing command', command);\r\n            this.commandIssuingDepth++;\r\n            var result = command.execute(this);\r\n            this.commandIssuingDepth--;\r\n            if(!result.isSuccessful)\r\n                console.debug(Array(this.commandIssuingDepth).join(\">\") +'unable to execute command', command, result);\r\n        }\r\n\r\n        commands.forEach(command=>{\r\n            var typeName = Util.FunctionName(command.constructor);\r\n            this.commandEmitter.emit(typeName,command);\r\n        })\r\n\r\n    }\r\n\r\n    public tick(elapsedMilliseconds:number){\r\n        this.clock.tick(elapsedMilliseconds);\r\n        this.tweens.update(this.clock.time);\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n\r\nclass Clock{\r\n    time:number = 0;\r\n\r\n    private _listeners: { (elapsed:number):void ;}[] = [];\r\n\r\n\r\n    public tick(elapsedMilliseconds:number){\r\n        this.time+=elapsedMilliseconds;\r\n\r\n        var listeners = this._listeners.slice(0);\r\n        for (var i = 0, l = listeners.length; i < l; i++) {\r\n            listeners[i].call(this, elapsedMilliseconds);\r\n        }\r\n    }\r\n\r\n    every(everyMillisecons, fn:()=>void){\r\n\r\n        this._listeners.push(elapsed=>{\r\n            var previousTime = this.time - elapsed;\r\n            var currentTime = this.time;\r\n\r\n            var numberOfOccurances = Math.floor(currentTime / everyMillisecons) - Math.floor(previousTime / everyMillisecons);\r\n            for(var i=0; i<numberOfOccurances; i++){\r\n                fn();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/World.ts","export var PlayerType = \"Player\";\r\nexport interface Player extends Tiled.LayerObject{\r\n    properties:{\r\n        money:number;\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/objectTypes/Player.ts","import {Command, CommandResult, SuccessResult} from \"./Command\";\r\nimport World from \"../World\";\r\nimport * as Linq from \"linq\"\r\nimport {ShipUtil, Ship} from \"../objectTypes/Ship\";\r\n\r\nexport default class DataCleanse implements Command{\r\n    constructor(){\r\n\r\n    }\r\n\r\n    execute(world:World):CommandResult{\r\n\r\n        Linq.from(world.state.layers)\r\n            .where(layer=>layer.type === \"objectgroup\")\r\n            .selectMany(layer=>layer.objects)\r\n            .forEach(obj=>{\r\n                obj.properties = obj.properties || {};\r\n            });\r\n\r\n        world.objectsOfType<Ship>(ShipUtil.TypeName).forEach(ship=>{\r\n            ship.properties._moveFromPoints = ship.properties._moveFromPoints || [];\r\n            ship.properties._moveToPoints = ship.properties._moveToPoints || [];\r\n        });\r\n\r\n        return SuccessResult;\r\n    }\r\n    canExecute(world:World):CommandResult{\r\n        return SuccessResult;\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/commands/DataCleanse.ts","import World from '../World';\r\nimport {City} from \"../objectTypes/City\";\r\nimport {Ship} from \"../objectTypes/Ship\";\r\nexport interface Command{\r\n    execute(board:World):CommandResult;\r\n    canExecute(board:World):CommandResult;\r\n}\r\n\r\nexport class CommandResult{\r\n   constructor(public isSuccessful:boolean, public failureReason?:string){\r\n\r\n   }\r\n}\r\n\r\nexport var SuccessResult = new CommandResult(true);\r\n\r\nexport class CityDoesNotHaveRequiredResource extends CommandResult{\r\n    constructor(public city:City, public resourceName:string){\r\n        super(false, `City '${city.name}' does not have enough ${resourceName}`);\r\n    }\r\n}\r\n\r\nexport class ShipDoesNotHaveRequiredResource extends CommandResult{\r\n    constructor(public ship:Ship, public resourceName:string){\r\n        super(false, `Ship '${ship.name}' does not have enough ${resourceName}`);\r\n    }\r\n}\r\n\r\nexport class ShipDoesNotHaveCapacity extends CommandResult{\r\n    constructor(public ship:Ship){\r\n        super(false, `Ship '${ship.name}' has not more capacity`);\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport class ShipIdNotFoundResult extends CommandResult{\r\n    constructor(shipId:string){\r\n        super(false, \"Ship with id '\"+shipId+\"' not found\");\r\n    }\r\n}\r\n\r\nexport class PortIdNotFoundResult extends CommandResult{\r\n    constructor(portId:string){\r\n        super(false, \"Port with id '\"+portId+\"' not found\");\r\n    }\r\n}\r\n\r\nexport class ResourceIdNotFoundResult extends CommandResult{\r\n    constructor(resourceId:string){\r\n        super(false, \"Resource with id '\"+resourceId+\"' not found\");\r\n    }\r\n}\r\n\r\nexport class MarkerIdNotFoundResult extends CommandResult{\r\n    constructor(markerId:string){\r\n        super(false, \"Marker with id '\"+markerId+\"' not found\");\r\n    }\r\n}\r\n\r\nexport class BalanceTooLowResult extends CommandResult{\r\n    constructor(){\r\n        super(false, \"Balance too low\");\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/engine/commands/Command.ts","import * as Linq from \"linq\"\r\nimport * as TWEEN from \"tween.js\";\r\nimport {Properties} from \"./Properties\";\r\n\r\nexport class ShipUtil{\r\n    static TypeName = \"Ship\";\r\n\r\n    static IsShip(layerObj:Tiled.LayerObject): layerObj is Ship{\r\n        return layerObj && layerObj.type === this.TypeName;\r\n    }\r\n\r\n    static TotalResources(ship:Ship):number{\r\n        return Linq.from(ship.properties).where(kvp=>Properties.IsInventory(kvp.key)).sum(kvp=>kvp.value as number);\r\n    }\r\n}\r\n\r\nexport interface Ship extends Tiled.LayerObject{\r\n    properties:{\r\n        playerId:number;\r\n\r\n        resourceLimit:number;\r\n        moveToTileIndex:number;\r\n        moveFromTileIndex:number;\r\n\r\n        _moveTween:TWEEN.Tween;\r\n        _moveToPoints:{x:number,y:number}[];\r\n        _moveFromPoints:{x:number,y:number}[];\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/objectTypes/Ship.ts","import * as Enumerable from \"linq\"\r\nexport class Properties{\r\n    private static ProductionPrefix = \"production.\";\r\n    private static InventoryPrefix = \"inventory.\";\r\n\r\n    public static ProductionPropertyName(resource:string){\r\n        return this.ProductionPrefix + resource;\r\n    }\r\n\r\n    public static ProductionResourceName(property:string):string{\r\n        return property.indexOf(this.ProductionPrefix) === 0\r\n            ? property.substring(this.ProductionPrefix.length)\r\n            : null;\r\n    }\r\n\r\n    public static IsProduction(property:string):boolean{\r\n        return property.indexOf(this.ProductionPrefix) === 0\r\n    }\r\n\r\n\r\n    public static InventoryPropertyName(resource:string){\r\n        return this.InventoryPrefix + resource;\r\n    }\r\n\r\n    public static InventoryResourceName(property:string):string{\r\n        return property.indexOf(this.InventoryPrefix) === 0\r\n            ? property.substring(this.InventoryPrefix.length)\r\n            : null;\r\n    }\r\n\r\n    public static IsInventory(property:string):boolean{\r\n        return property.indexOf(this.InventoryPrefix) === 0\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/objectTypes/Properties.ts","import * as TWEEN from \"tween.js\";\r\n\r\nexport default class TweenGroup{\r\n    private _tweens = [];\r\n\r\n    getAll () {\r\n        return this._tweens;\r\n    }\r\n\r\n    removeAll() {\r\n        this._tweens = [];\r\n    }\r\n\r\n    add(tween) {\r\n        //remove it from the global group\r\n        TWEEN.remove(tween);\r\n        \r\n        this._tweens.push(tween);\r\n\r\n        return tween;\r\n    }\r\n\r\n    remove(tween) {\r\n        var i = this._tweens.indexOf(tween);\r\n\r\n        if (i !== -1) {\r\n            this._tweens.splice(i, 1);\r\n        }\r\n    }\r\n\r\n    update(time) {\r\n\r\n        if (this._tweens.length === 0) {\r\n            return false;\r\n        }\r\n\r\n        var i = 0;\r\n\r\n        time = time !== undefined ? time : window.performance.now();\r\n\r\n        while (i < this._tweens.length) {\r\n\r\n            if (this._tweens[i].update(time)) {\r\n                i++;\r\n            } else {\r\n                this._tweens.splice(i, 1);\r\n            }\r\n\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/TweenGroup.ts","export interface LatLng{\r\n    lat: number;\r\n    lng: number;\r\n}\r\n\r\nexport interface XY{\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport interface Dimension{\r\n    width: number;\r\n    height: number;\r\n}\r\n\r\nexport interface Rect{\r\n    x: number;\r\n    y: number;\r\n    width:number;\r\n    height:number;\r\n}\r\n\r\nexport class LatLngUtil {\r\n    static distance(latlng1:LatLng, latlng2:LatLng):number{\r\n        var dlat = latlng2.lat - latlng1.lat;\r\n        var dlng = latlng2.lng -latlng1.lng;\r\n        return Math.sqrt(dlat*dlat+dlng*dlng);\r\n    }\r\n}\r\n\r\nexport class XYUtil{\r\n    static distance(xy1:XY, xy2:XY):number{\r\n        var dx = xy2.x - xy1.x;\r\n        var dy = xy2.y -xy1.y;\r\n        return Math.sqrt(dx*dx+dy*dy);\r\n    }\r\n\r\n    static angleOfLine(xy1:XY, xy2:XY){\r\n        var startRadians=Math.atan((xy2.y-xy1.y)/(xy2.x-xy1.x));\r\n        startRadians+=((xy2.x>=xy1.x)?-90:90)*Math.PI/180;\r\n\r\n        return startRadians;\r\n    }\r\n\r\n    static rotate(rad:number, center:XY, xys:XY[]):XY[]{\r\n        var translated = []\r\n        xys.forEach(xy=>{\r\n            var x = xy.x - center.x;\r\n            var y = xy.y - center.y;\r\n\r\n            var tx = x * Math.cos(rad) - y * Math.sin(rad);\r\n            var ty = y * Math.cos(rad) + x * Math.sin(rad);\r\n\r\n            tx = tx + center.x;\r\n            ty = ty + center.y;\r\n\r\n            translated.push({\r\n                x : tx,\r\n                y : ty\r\n            })\r\n        })\r\n\r\n        return translated;\r\n    }\r\n\r\n\r\n    static equals(xy1:XY, xy2:XY):boolean{\r\n        return xy1 && xy2 && xy1.x === xy2.x && xy1.y === xy2.y\r\n    }\r\n\r\n    static scaleRect(rect:Rect, scale:XY | number, pivot:XY={x:rect.x+rect.width/2,y:rect.y+rect.height/2})\r\n    {\r\n        var xyScale = typeof scale === \"number\"\r\n            ? {x:scale,y:scale}\r\n            : scale;\r\n\r\n        let p1 = {x:rect.x, y:rect.y};\r\n        let p2 = {x:rect.x+rect.width, y:rect.y+rect.height};\r\n\r\n\r\n\r\n        let scaled_p1 = {\r\n            x:((p1.x - pivot.x) * xyScale.x) + pivot.x,\r\n            y:((p1.y - pivot.y) * xyScale.y) + pivot.y\r\n        };\r\n        let scaled_p2 = {\r\n            x:((p2.x - pivot.x) * xyScale.x) + pivot.x,\r\n            y:((p2.y - pivot.y) * xyScale.y) + pivot.y\r\n        };\r\n\r\n        return {\r\n            x:scaled_p1.x,\r\n            y:scaled_p1.y,\r\n            width:scaled_p2.x - scaled_p1.x,\r\n            height:scaled_p2.y - scaled_p1.y\r\n        };\r\n    }\r\n    \r\n    \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/Coordinates.ts","import * as Linq from \"linq\"\r\nimport * as PIXI from 'pixi.js'\r\nimport Resources from \"../Resources\";\r\nimport Texture = PIXI.Texture;\r\nimport MapDisplay from \"../display/MapDisplay\";\r\nimport Camera from \"../display/Camera\";\r\nimport VerticalContainer from \"../controls/StackContainer\";\r\nimport CityDetails from \"../menus/CityMenu\";\r\nimport {City, CityUtil} from \"../../engine/objectTypes/City\";\r\nimport {HContainer} from \"../controls/StackContainer\";\r\nimport MenuContainer from \"../menus/MenuContainer\";\r\nimport CityHarvest from \"../../engine/commands/CityHarvest\";\r\nimport DebugDraw from \"../controls/DebugDraw\";\r\nimport FillContainer from \"../controls/FillContainer\";\r\nimport UIContainer from \"../controls/UIContainer\";\r\nimport Container = PIXI.Container;\r\nimport {ShipUtil, Ship} from \"../../engine/objectTypes/Ship\";\r\nimport ShipMove from \"../../engine/commands/ShipMove\";\r\nimport MapOverlayDisplay from \"../display/MapOverlayDisplay\";\r\nimport ShipPathOverlay from \"../display/overlay/ShipPathOverlay\";\r\nimport ShipTravelPointsOverlay from \"../display/overlay/ShipTravelPointsOverlay\";\r\n\r\n\r\n\r\nexport default class PlayScene extends HContainer{\r\n\r\n    private mapDisplay:MapDisplay;\r\n    private camera:Camera;\r\n    private menuContainer:MenuContainer;\r\n\r\n\r\n    constructor(resources:Resources) {\r\n        super(-resources.menuBorder.width);\r\n\r\n        PIXI.ticker.shared.add(()=> {\r\n            //we will prevent hte world from skipping ahead if tab not in focus\r\n            let elapsedTime = Math.min(200, PIXI.ticker.shared.elapsedMS * PIXI.ticker.shared.speed);\r\n            resources.world.tick(elapsedTime);\r\n        });\r\n\r\n        this.mapDisplay = new MapDisplay(resources);\r\n        this.camera = new Camera(resources, this.mapDisplay);\r\n        this.menuContainer = new MenuContainer(resources);\r\n\r\n\r\n\r\n\r\n        this.addChild(this.menuContainer, {pixels: 300, z: 1});\r\n        this.addChild(this.camera, {weight: 1});\r\n\r\n        //for now we will treat the players ship as always selected\r\n        let player = resources.world.player();\r\n        let playerShip = resources.world.objectsOfType<Ship>(ShipUtil.TypeName).firstOrDefault(s=>s.properties.playerId === player.id);\r\n        if(playerShip) {\r\n            this.mapDisplay.underObjectsOverlay.addChild(new ShipPathOverlay(resources, playerShip)).animateIn();\r\n            this.mapDisplay.underObjectsOverlay.addChild(new ShipTravelPointsOverlay(resources, playerShip)).animateIn();\r\n        }\r\n        this.mapDisplay.on(\"selection\", (selectedItems)=>{\r\n\r\n            selectedItems = selectedItems.push(playerShip);\r\n            let items = Linq.from(selectedItems);\r\n\r\n        })\r\n\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/scenes/PlayScene.ts","import * as PIXI from 'pixi.js'\r\nimport Util from \"../../util/Util\";\r\nimport DisplayObject = PIXI.DisplayObject;\r\nimport Graphics = PIXI.Graphics;\r\nimport DebugDraw from \"./DebugDraw\"\r\nimport UIContainer from \"./UIContainer\";\r\n\r\ninterface CellSize{\r\n    flexible?:boolean\r\n    pixels?:number;\r\n    weight?:number;\r\n\r\n    z?:number;\r\n    order?:number;\r\n}\r\n\r\ninterface CellSizeHolder{\r\n    _cellSize:CellSize;\r\n}\r\n\r\nexport default class StackContainer extends UIContainer{\r\n    private get primaryDimension(){\r\n        return this.orientation === \"horizontal\" ? \"width\" : \"height\";\r\n    }\r\n    private get secondaryDimension(){\r\n        return this.orientation === \"horizontal\" ? \"height\" : \"width\";\r\n    }\r\n\r\n    private get primaryAxis(){\r\n        return this.orientation === \"horizontal\" ? \"x\" : \"y\";\r\n    }\r\n\r\n    private get secondaryAxis(){\r\n        return this.orientation === \"horizontal\" ? \"y\" : \"x\";\r\n    }\r\n\r\n\r\n    private nextCellOrder = 1;\r\n\r\n\r\n    constructor(public orientation:\"horizontal\"|\"vertical\",\r\n                public spacing=0){\r\n        super();\r\n        // this.renderRect = {x:0,y:0,width:this.width,height:this.height}\r\n        this.onChildrenChange = ()=>{\r\n\r\n            //sort the children so the z layer is followed\r\n            this.children.sort((c1, c2)=>(this.getChildCellSize(c1).z || 0) - (this.getChildCellSize(c2).z || 0));\r\n        }\r\n    }\r\n\r\n    private isPixelSize(size:CellSize):boolean{\r\n        return !!size.pixels\r\n    }\r\n\r\n    private isWeightSize(size:CellSize):boolean{\r\n        return !!size.weight\r\n    }\r\n\r\n    private isFlexibleSize(size:CellSize):boolean{\r\n        return size.flexible\r\n    }\r\n\r\n    private getChildCellSize(child:PIXI.DisplayObject){\r\n        let size = (<CellSizeHolder & PIXI.DisplayObject>child)._cellSize;\r\n        size= size || {flexible:true};\r\n        return size;\r\n    }\r\n\r\n    private setChildCellSize(child:PIXI.DisplayObject, cellSize:CellSize){\r\n        (<CellSizeHolder & PIXI.DisplayObject>child)._cellSize = cellSize;\r\n    }\r\n\r\n\r\n    relayout(){\r\n        let childrenInCellOrder = this.children.slice().sort((c1,c2)=>{\r\n            return (this.getChildCellSize(c1).order || this.nextCellOrder) - (this.getChildCellSize(c2).order || this.nextCellOrder)\r\n        });\r\n\r\n\r\n        //we will run through all the children and gather some data about the sizing\r\n        let totalPixelSize = 0;\r\n        let totalFlexSize = 0;\r\n        let totalWeight = 0;\r\n        childrenInCellOrder.forEach(child=>{\r\n            let cellSize = this.getChildCellSize(child);\r\n            if(this.isPixelSize(cellSize)){\r\n                totalPixelSize += cellSize.pixels;\r\n            }\r\n            else if(this.isFlexibleSize(cellSize)){\r\n                totalFlexSize += child[this.primaryDimension];\r\n            }\r\n            else if(this.isWeightSize(cellSize)){\r\n                totalWeight += cellSize.weight;\r\n            }\r\n        });\r\n\r\n        //now we will do the real run through setting everyones x/y and sizes\r\n        let runningOffset = 0\r\n        childrenInCellOrder.forEach(child=> {\r\n            let cellSize = this.getChildCellSize(child);\r\n            child[this.primaryAxis] = runningOffset;\r\n\r\n            if(this.isPixelSize(cellSize)){\r\n                var actualSize = Math.max(0, Math.min(cellSize.pixels, this[this.primaryDimension] - runningOffset));\r\n                child[this.primaryDimension] = actualSize;\r\n                child[this.secondaryDimension] = this[this.secondaryDimension];\r\n                runningOffset += actualSize;\r\n            }\r\n            else if(this.isFlexibleSize(cellSize)){\r\n                child[this.secondaryDimension] = this[this.secondaryDimension];\r\n                runningOffset += child[this.primaryDimension];\r\n            }\r\n            else if(this.isWeightSize(cellSize)){\r\n                let totalWeightSize = Math.max(0,this[this.primaryDimension] - totalPixelSize - totalFlexSize);\r\n\r\n                let actualSize = Math.round(cellSize.weight / totalWeight * totalWeightSize);\r\n                child[this.primaryDimension] = actualSize;\r\n                child[this.secondaryDimension] = this[this.secondaryDimension];\r\n                runningOffset += actualSize;\r\n            }\r\n            runningOffset += this.spacing;\r\n        });\r\n    }\r\n\r\n    cells(children:Array<[CellSize,PIXI.DisplayObject]>){\r\n        children.forEach(child=>{\r\n            this.addChildWithoutRelayout(child[1],child[0]);\r\n        });\r\n        this.relayout();\r\n        return this;\r\n    }\r\n\r\n    cell(size:CellSize, child:PIXI.DisplayObject) : this{\r\n        this.addChild(child, size);\r\n        return this;\r\n    }\r\n\r\n    addChildWithoutRelayout<T extends PIXI.DisplayObject>(child:T, size?:CellSize): T{\r\n        size = size || {flexible:true};\r\n        size.order = size.order || this.nextCellOrder;\r\n        this.nextCellOrder = size.order+1;\r\n\r\n        this.setChildCellSize(child,size);\r\n        let returnValue = super.addChild(child);\r\n        return returnValue;\r\n    }\r\n\r\n    addChild<T extends PIXI.DisplayObject>(child:T, size:CellSize = {flexible:true}): T{\r\n        let returnValue = this.addChildWithoutRelayout(child,size);\r\n        this.relayout();\r\n        return returnValue;\r\n    }\r\n\r\n    addChildAt<T extends PIXI.DisplayObject>(child: T, index: number): T{\r\n        let result = super.addChildAt.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    swapChildren(child: PIXI.DisplayObject, child2: PIXI.DisplayObject): void{\r\n        let result = super.swapChildren.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    getChildIndex(child: PIXI.DisplayObject): number{\r\n        let result = super.getChildIndex.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    setChildIndex(child: PIXI.DisplayObject, index: number): void{\r\n        let result = super.setChildIndex.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    getChildAt(index: number): PIXI.DisplayObject{\r\n        let result = super.getChildAt.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    removeChild<T extends PIXI.DisplayObject>(child: T): T{\r\n        let result = super.removeChild.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    removeChildAt(index: number): PIXI.DisplayObject{\r\n        let result = super.removeChildAt.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    removeChildren(beginIndex?: number, endIndex?: number): PIXI.DisplayObject[]{\r\n        let result = super.removeChildren.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport class VContainer extends StackContainer{\r\n    constructor(spacing = 0){\r\n        super(\"vertical\", spacing);\r\n    }\r\n}\r\n\r\nexport class HContainer extends StackContainer{\r\n    constructor(spacing = 0){\r\n        super(\"horizontal\", spacing);\r\n    }\r\n}\r\n\r\nexport class Spacer extends DisplayObject{\r\n    constructor(public width=0, public height=0){\r\n        super();\r\n        //dont try and render this\r\n        this.visible=false;\r\n        this.renderable = false;\r\n    }\r\n    getLocalBounds(){\r\n        return new PIXI.Rectangle(0,0,this.width, this.height)\r\n    }\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/controls/StackContainer.ts","import * as PIXI from \"pixi.js\"\r\nimport Util from \"../../util/Util\";\r\nimport RenderRectContainer from \"./RenderRectContainer\";\r\nimport DebugDraw from \"./DebugDraw\";\r\n\r\nexport default class UIContainer extends PIXI.Container{\r\n\r\n\r\n    private _width;\r\n    set width(value:number){\r\n        if(value !== this._width) {\r\n            this._width = value;\r\n            this.relayout();\r\n        }\r\n    }\r\n    get width(){\r\n        return this.getBounds().width;\r\n    }\r\n\r\n    private _height;\r\n    set height(value:number){\r\n        if(value !== this._height) {\r\n            this._height = value;\r\n            this.relayout();\r\n        }\r\n    }\r\n    get height(){\r\n        return this.getBounds().height;\r\n    }\r\n\r\n    constructor(){\r\n        super();\r\n        //\r\n        // let oldChildrenChange = this.onChildrenChange;\r\n        // this.onChildrenChange = ()=>{\r\n        //     oldChildrenChange();\r\n        //     this.relayout();\r\n        // }\r\n\r\n        //DebugDraw.DrawBounds(this);\r\n    }\r\n\r\n\r\n    relayout(){\r\n\r\n    }\r\n\r\n\r\n    getBounds(){\r\n       let bounds = super.getBounds().clone();\r\n\r\n        bounds.x = this.pivot.x;\r\n        bounds.y = this.pivot.y;\r\n        if(this._width != null) {\r\n            bounds.width = this._width;\r\n        }\r\n\r\n        if(this._height != null){\r\n            bounds.height = this._height;\r\n        }\r\n\r\n        return bounds;\r\n    }\r\n\r\n    getChildrenBounds(){\r\n        //little hack, getLocalBounds updates all the transforms on the children,\r\n        //then calls getBounds. Issue is we have overridden get bound so it calls the\r\n        //wrong get bounds. Our solution is to call the super class twice, super.getLocalBounds to\r\n        //update the transforms and super.getBounds to get the childrens bounds.\r\n        let ignore = super.getLocalBounds();\r\n        return super.getBounds();\r\n    }\r\n\r\n    withChild(child:PIXI.DisplayObject):this{\r\n        this.addChild(child);\r\n        return this;\r\n    }\r\n    addChildWithoutRelayout<T extends PIXI.DisplayObject>(child:T):T{\r\n        let result = super.addChild.apply(this, arguments);\r\n        return result;\r\n    }\r\n    addChild<T extends PIXI.DisplayObject>(child:T):T{\r\n        let result = super.addChild.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    addChildAt<T extends PIXI.DisplayObject>(child: T, index: number): T{\r\n        let result = super.addChildAt.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    swapChildren(child: PIXI.DisplayObject, child2: PIXI.DisplayObject): void{\r\n        let result = super.swapChildren.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    getChildIndex(child: PIXI.DisplayObject): number{\r\n        let result = super.getChildIndex.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    setChildIndex(child: PIXI.DisplayObject, index: number): void{\r\n        let result = super.setChildIndex.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    getChildAt(index: number): PIXI.DisplayObject{\r\n        let result = super.getChildAt.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    removeChild<T extends PIXI.DisplayObject>(child: T): T{\r\n        let result = super.removeChild.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    removeChildAt(index: number): PIXI.DisplayObject{\r\n        let result = super.removeChildAt.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n    removeChildren(beginIndex?: number, endIndex?: number): PIXI.DisplayObject[]{\r\n        let result = super.removeChildren.apply(this, arguments);\r\n        this.relayout();\r\n        return result;\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/controls/UIContainer.ts","import Resources from \"../Resources\";\r\nimport TileLayerDisplay from \"./tiled/TileLayerDisplay\";\r\nimport {CityType, City, CityUtil} from \"../../engine/objectTypes/City\";\r\nimport LayerObjectDisplay from \"./tiled/LayerObjectDisplay\";\r\nimport CityDisplay from \"./CityDisplay\";\r\nimport EventEmitter = PIXI.utils.EventEmitter;\r\nimport Graphics = PIXI.Graphics;\r\nimport {ShipUtil, Ship} from \"../../engine/objectTypes/Ship\";\r\nimport ShipDisplay from \"./ShipDisplay\";\r\nimport {TileProperties} from \"../../engine/objectTypes/TileProperties\";\r\nimport * as Linq from \"linq\"\r\nimport ShipPathOverlay from \"./overlay/ShipPathOverlay\";\r\nimport Container = PIXI.Container;\r\nimport * as TWEEN from \"tween.js\"\r\nimport ShipTravelPointsOverlay from \"./overlay/ShipTravelPointsOverlay\";\r\n\r\nexport default class MapDisplay extends PIXI.Container{\r\n\r\n    background:PIXI.extras.TilingSprite;\r\n\r\n    public tileContainer : PIXI.Container;\r\n    public underObjectsOverlay: PIXI.Container;\r\n    public shipContainer: PIXI.Container;\r\n    public overObjectsOverlay: PIXI.Container;\r\n\r\n    constructor(public resources:Resources){\r\n        super();\r\n\r\n\r\n        //we dont support other render orders for now\r\n        var renderOrder = resources.world.state.renderorder\r\n        if(renderOrder != \"right-down\"){\r\n            throw Error(\"render order '${renderOrder}' is not supported. right-down is hte only supported render order\");\r\n        }\r\n\r\n        var map = resources.world.state;\r\n\r\n        //1. background\r\n        this.background = this.addChild(new PIXI.extras.TilingSprite(resources.tileTextures[1], this.width,this.height));\r\n\r\n        //2. tiles\r\n        this.tileContainer = this.addChild(new Container());\r\n        resources.world.tileLayers().forEach(layer=>{\r\n            var layerDisplay = new TileLayerDisplay(map, layer, resources.tileTextures);\r\n            this.tileContainer.addChild(layerDisplay);\r\n        });\r\n\r\n        //3. under object overlay\r\n        this.underObjectsOverlay = this.addChild(new PIXI.Container());\r\n\r\n        //4. objects\r\n\r\n        resources.world.objectsOfType<City>(CityUtil.TypeName).forEach(city=>{\r\n            var cityDisplay = new CityDisplay(city, resources.tileTextures);\r\n            this.addChild(cityDisplay);\r\n        });\r\n\r\n        this.shipContainer = this.addChild(new PIXI.Container());\r\n        resources.world.objectsOfType<Ship>(ShipUtil.TypeName).forEach(ship=>{\r\n            var cityDisplay = new ShipDisplay(ship, resources.tileTextures);\r\n            this.shipContainer.addChild(cityDisplay);\r\n        });\r\n\r\n        //4. over object overlay\r\n        this.overObjectsOverlay = this.addChild(new PIXI.Container());\r\n\r\n\r\n\r\n        //5. grid\r\n        // let grid = this.addChild(new PIXI.Graphics());\r\n        // grid.lineStyle(1,0xFFFFFF, 0.5);\r\n        // for(let row = 0 ; row <= resources.world.state.height; row++){\r\n        //     grid.moveTo(row*resources.world.state.tileheight,0);\r\n        //     grid.lineTo(row*resources.world.state.tileheight, resources.world.state.width * resources.world.state.tilewidth);\r\n        //\r\n        // }\r\n        // for(let col=0;col<resources.world.state.width;col++){\r\n        //     grid.moveTo(0,col*resources.world.state.tilewidth);\r\n        //     grid.lineTo( resources.world.state.height * resources.world.state.tileheight,col*resources.world.state.tilewidth);\r\n        // }\r\n\r\n\r\n        this.interactive = true;\r\n\r\n        this.on(\"click\", this.onClick, this);\r\n    }\r\n\r\n\r\n\r\n    onClick(e){\r\n        let selectedItems = [];\r\n\r\n        let city = this.findSelectedCity(e);\r\n        if(city)\r\n            selectedItems.push(city);\r\n\r\n        let ship = this.findSelectedShip(e);\r\n        if(ship)\r\n            selectedItems.push(ship);\r\n\r\n        this.emit(\"selection\", selectedItems);\r\n    }\r\n\r\n\r\n    findSelectedCity(e){\r\n        let world = this.resources.world;\r\n        let localPoint = this.toLocal(e.data.global);\r\n\r\n        let tileIndex = this.resources.world.getTileIndex(localPoint);\r\n        let partOfCityIndexes = world.getExtendedNeighbours(tileIndex, index=>world.isIndexPartOfCity(index));\r\n        if(!partOfCityIndexes.any()){\r\n            return null;\r\n        }\r\n        let city = world.objectsOfType<City>(CityUtil.TypeName).firstOrDefault(city=>{\r\n            return world.getTileIndexesInRect(city).intersect(partOfCityIndexes).any();\r\n        });\r\n\r\n        return city;\r\n    }\r\n\r\n    findSelectedShip(e){\r\n        let world = this.resources.world;\r\n        let localPoint = this.shipContainer.toLocal(e.data.global);\r\n        \r\n        let selectedShipDisplay = Linq.from(this.shipContainer.children)\r\n            .where(x=>{\r\n                let localPoint = e.data.getLocalPosition(x);\r\n                return x.getLocalBounds().contains(localPoint.x, localPoint.y)\r\n            })\r\n            .cast<ShipDisplay>()\r\n            .firstOrDefault();\r\n\r\n        if(selectedShipDisplay)\r\n            return selectedShipDisplay.ship;\r\n        return null;\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    public setRenderRect(rect:{x:number, y:number, width:number, height:number}) {\r\n\r\n\r\n        //we will adjust our background in such a way that the tilings aligns wiht our drawn tiles\r\n        //we will also need to modify the width/height to ensure we still cover the full render area\r\n        let xTileAligned = Math.floor(rect.x / this.background.texture.width) * this.background.texture.width;\r\n        let xAdjustment = rect.x - xTileAligned;\r\n        let yTileAligned = Math.floor(rect.y / this.background.texture.height) * this.background.texture.height;\r\n        let yAdjustment = rect.y - yTileAligned;\r\n\r\n\r\n        this.background.x = xTileAligned;\r\n        this.background.y = yTileAligned;\r\n\r\n        this.background.width = rect.width + xAdjustment;\r\n        this.background.height = rect.height + yAdjustment;\r\n    }\r\n\r\n    getBounds(){\r\n        let worldState = this.resources.world.state;\r\n        return new PIXI.Rectangle(0,0,worldState.width * worldState.tilewidth, worldState.height* worldState.tileheight);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/display/MapDisplay.ts","import * as PIXI from 'pixi.js'\r\n\r\nexport default class TileLayerDisplay extends PIXI.Container{\r\n    constructor(map:Tiled.Map, layer:Tiled.Layer, tileMap:{[gid:number]:PIXI.Texture}){\r\n        super();\r\n\r\n        for(var i=0;i<layer.data.length;i++){\r\n            let gid = layer.data[i];\r\n            let texture = tileMap[gid];\r\n            //let properties = \r\n            \r\n            //only draw the item if we actuall yhave a texture\r\n            if(texture) {\r\n                var tileCol = i % layer.width;\r\n                var tileRow = Math.floor(i / layer.height);\r\n\r\n                var sprite = new PIXI.Sprite(texture);\r\n                \r\n                //we will position based on the bottom right tile when the tileset is multiple tiles high\r\n                sprite.pivot.y = texture.height - map.tileheight;\r\n\r\n\r\n                sprite.x = map.tilewidth * tileCol;\r\n                sprite.y = map.tileheight * tileRow;\r\n                this.addChild(sprite);\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/display/tiled/TileLayerDisplay.ts","export var CityType = \"City\";\r\nexport class CityUtil{\r\n    static TypeName = \"City\";\r\n\r\n    static IsCity(layerObj:Tiled.LayerObject): layerObj is City{\r\n        return layerObj && layerObj.type === this.TypeName;\r\n    }\r\n\r\n    \r\n}\r\nexport interface City extends Tiled.LayerObject{\r\n    properties:{\r\n        economicScore:number;\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/objectTypes/City.ts","import * as PIXI from 'pixi.js'\r\nimport LayerObjectDisplay from \"./tiled/LayerObjectDisplay\";\r\nimport {City} from \"../../engine/objectTypes/City\";\r\n\r\n\r\nexport  default class CityDisplay extends LayerObjectDisplay{\r\n    constructor(public city:City, public tileMap:{[gid:number]:PIXI.Texture}){\r\n        super(city, tileMap);\r\n\r\n        this.interactive = true;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/display/CityDisplay.ts","import * as PIXI from 'pixi.js'\r\n\r\n\r\nexport  default class LayerObjectDisplay extends PIXI.Container{\r\n    constructor(public layerObject:Tiled.LayerObject, public tileMap:{[gid:number]:PIXI.Texture}){\r\n        super();\r\n\r\n        this.pivot.y = layerObject.height;\r\n        this.x = layerObject.x;\r\n        this.y = layerObject.y;\r\n\r\n        if(layerObject.gid){\r\n            var texture = tileMap[layerObject.gid];\r\n            var sprite = new PIXI.Sprite(texture);\r\n            sprite.scale.x = layerObject.width / texture.width;\r\n            sprite.scale.y = layerObject.height / texture.height;\r\n            this.addChild(sprite);\r\n        }\r\n\r\n        \r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/display/tiled/LayerObjectDisplay.ts","import * as PIXI from 'pixi.js'\r\nimport LayerObjectDisplay from \"./tiled/LayerObjectDisplay\";\r\nimport {City} from \"../../engine/objectTypes/City\";\r\nimport {Ship} from \"../../engine/objectTypes/Ship\";\r\n\r\n\r\nexport  default class ShipDisplay extends PIXI.Sprite{\r\n    constructor(public ship:Ship, public tileMap:{[gid:number]:PIXI.Texture}){\r\n        super(tileMap[37]);\r\n        this.pivot.x = this.texture.width/2;\r\n        this.pivot.y = this.texture.height/2;\r\n\r\n        this.x = ship.x;\r\n        this.y = ship.y;\r\n\r\n        PIXI.ticker.shared.add(()=> {\r\n            let newx = ship.x;\r\n            let newy = ship.y;\r\n\r\n            if(this.x > newx)\r\n                 this.scale.x = 1;\r\n            else if(this.x < newy)\r\n                 this.scale.x = -1;\r\n            this.x = newx;\r\n            this.y = newy;\r\n        }); \r\n\r\n        // this.interactive = true;\r\n        // this.on(\"click\", (e)=>{\r\n        //     e.data.selection = (e.data.selection || [])\r\n        //     e.data.selection.push(this.ship);\r\n        // })\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/display/ShipDisplay.ts","import Resources from \"../Resources\";\r\nimport Util from \"../../util/Util\";\r\nimport {ChangeMonitor} from \"../../util/Monitor\";\r\nimport {pinchable, panable} from \"../../util/Interactions\";\r\nimport {XYUtil} from \"../../util/Coordinates\";\r\nimport PlayerLookAt from \"../../engine/commands/PlayerLookAt\";\r\nimport UIContainer from \"../controls/UIContainer\";\r\n\r\nexport default class Camera extends UIContainer{\r\n\r\n    constructor(public resources:Resources,\r\n                public target:PIXI.Container,\r\n                public minZoom:number = 1,\r\n                public maxZoom:number = 1){\r\n        super();\r\n        \r\n        this.addChild(target);\r\n\r\n        this.resources.world.onCommand(PlayerLookAt, ()=>this.lookAtPlayer());\r\n\r\n        //setup the panning\r\n        panable(this);\r\n        this.on('panmove', (event)=> {\r\n\r\n            let newLookAt = this.constrainLookAt({\r\n                x:this.target.pivot.x - event.deltaX,\r\n                y:this.target.pivot.y - event.deltaY\r\n            });\r\n            \r\n            this.resources.world.issueCommand(new PlayerLookAt(newLookAt));\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n    relayout(){\r\n        this.lookAtPlayer();\r\n        this.setChildRenderRect();\r\n    }\r\n\r\n    public lookAtPlayer(){\r\n        //center our screen on the player\r\n        var player = this.resources.world.player();\r\n\r\n        this.lookAt({\r\n            x: player.x + player.width / 2,\r\n            y: player.y + player.height / 2\r\n        });\r\n    }\r\n\r\n    public lookAt(point:{x:number,y:number}){\r\n        //console.log(point);\r\n        point = this.constrainLookAt(point);\r\n        this.target.pivot.x = Math.floor(point.x);\r\n        this.target.pivot.y = Math.floor(point.y);\r\n\r\n        this.target.x = Math.floor(this.width / 2) ;\r\n        this.target.y = Math.floor(this.height / 2);\r\n\r\n        this.setChildRenderRect();\r\n    }\r\n\r\n    public constrainLookAt(point:{x:number,y:number}){\r\n        let viewRect = {\r\n            x: point.x - this.width / 2,\r\n            y: point.y - this.height / 2,\r\n            width:this.width,\r\n            height:this.height\r\n        }\r\n\r\n        let worldRect = {\r\n            x:0,\r\n            y:0,\r\n            width:this.target.width,\r\n            height:this.target.height\r\n        };\r\n\r\n        viewRect = this.constrainRect(viewRect, worldRect);\r\n\r\n        return {\r\n            x:viewRect.x + viewRect.width / 2,\r\n            y:viewRect.y + viewRect.height /2\r\n        }\r\n\r\n    }\r\n    \r\n    public constrainRect(\r\n        rect:{x:number,y:number,width:number,height:number},\r\n        constraint:{x:number,y:number,width:number,height:number}){\r\n\r\n        if(rect.width < constraint.width){\r\n            //view rect is within the constraint\r\n            if(rect.x < constraint.x)\r\n                rect.x = constraint.x;\r\n            if(rect.x+rect.width > constraint.x+constraint.width)\r\n                rect.x =constraint.x+constraint.width - rect.width;\r\n        }\r\n        else if(rect.width >= constraint.width){\r\n            //view rect contains the constract\r\n            if(rect.x > constraint.x)\r\n                rect.x = constraint.x;\r\n            if(rect.x+rect.width < constraint.x+constraint.width)\r\n                rect.x =constraint.x+constraint.width - rect.width;\r\n        }\r\n\r\n\r\n        if(rect.height < constraint.height){\r\n            //view rect is within the constraint\r\n            if(rect.y < constraint.y)\r\n                rect.y = constraint.y;\r\n            if(rect.y+rect.height > constraint.y+constraint.height)\r\n                rect.y =constraint.y+constraint.height - rect.height;\r\n        }\r\n        else if(rect.height >= constraint.height){\r\n            //view rect contains the constraint\r\n            if(rect.y > constraint.y)\r\n                rect.y = constraint.y;\r\n            if(rect.y+rect.height < constraint.y+constraint.height)\r\n                rect.y =constraint.y+constraint.height - rect.height;\r\n        }\r\n\r\n\r\n\r\n        return rect\r\n    }\r\n\r\n\r\n    private setChildRenderRect(){\r\n        Util.TrySetRenderRect(this.target, {\r\n            x:this.target.pivot.x-this.target.x,\r\n            y:this.target.pivot.y-this.target.y,\r\n            width:this.width, height:this.height});\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/display/Camera.ts","export function panable (sprite:PIXI.DisplayObject) {\r\n    function mouseDown (e) {\r\n        start(e, e.data.originalEvent)\r\n    }\r\n\r\n    function touchStart (e) {\r\n        start(e, e.data.originalEvent.targetTouches[0])\r\n    }\r\n\r\n    // possibly be called twice or more\r\n    function start (e, t) {\r\n        if (e.target._pan) {\r\n            return\r\n        }\r\n        e.target._pan = {\r\n            p: {\r\n                x: t.clientX,\r\n                y: t.clientY,\r\n                date: new Date()\r\n            }\r\n        }\r\n        e.target\r\n            .on('mousemove', mouseMove)\r\n            .on('touchmove', touchMove)\r\n    }\r\n\r\n    function mouseMove (e) {\r\n        move(e, e.data.originalEvent)\r\n    }\r\n\r\n    function touchMove (e) {\r\n        let t = e.data.originalEvent.targetTouches\r\n        if (!t || t.length > 1) {\r\n            end(e)\r\n            return\r\n        }\r\n        move(e, t[0])\r\n    }\r\n\r\n    function move (e, t) {\r\n        let now:any = new Date()\r\n        let interval = now - e.target._pan.p.date\r\n        if (interval < 12) {\r\n            return\r\n        }\r\n        let dx = t.clientX - e.target._pan.p.x\r\n        let dy = t.clientY - e.target._pan.p.y\r\n        let distance = Math.sqrt(dx * dx + dy * dy)\r\n        if (!e.target._pan.pp) {\r\n            let threshold = (t instanceof (<any>window).MouseEvent) ? 2 : 7\r\n            if (distance > threshold) {\r\n                e.target.emit('panstart')\r\n                e.target._pan.pp = {}\r\n            }\r\n            return\r\n        }\r\n        let event = {\r\n            deltaX: dx,\r\n            deltaY: dy,\r\n            velocity: distance / interval,\r\n            data: e.data\r\n        }\r\n        e.target.emit('panmove', event)\r\n        e.target._pan.pp = {\r\n            x: e.target._pan.p.x,\r\n            y: e.target._pan.p.y,\r\n            date: e.target._pan.p.date\r\n        }\r\n        e.target._pan.p = {\r\n            x: t.clientX,\r\n            y: t.clientY,\r\n            date: now\r\n        }\r\n    }\r\n\r\n    // TODO: Inertia Mode\r\n    // possibly be called twice or more\r\n    function end (e) {\r\n        if (e.target._pan && e.target._pan.pp) {\r\n            e.target.emit('panend')\r\n        }\r\n        e.target._pan = null\r\n        e.target\r\n            .removeListener('mousemove', mouseMove)\r\n            .removeListener('touchmove', touchMove)\r\n    }\r\n\r\n    sprite.interactive = true\r\n    sprite\r\n        .on('mousedown', mouseDown)\r\n        .on('touchstart', touchStart)\r\n        .on('mouseup', end)\r\n        .on('mouseupoutside', end)\r\n        .on('touchend', end)\r\n        .on('touchendoutside', end)\r\n}\r\n\r\n\r\n\r\n\r\nexport function pinchable (sprite) {\r\n    function start (e) {\r\n        e.target.on('touchmove', move)\r\n    }\r\n\r\n    function move (e) {\r\n        let t = e.data.originalEvent.targetTouches\r\n        if (!t || t.length < 2) {\r\n            return\r\n        }\r\n        let dx = t[0].clientX - t[1].clientX\r\n        let dy = t[0].clientY - t[1].clientY\r\n        let distance = Math.sqrt(dx * dx + dy * dy)\r\n        if (!e.target._pinch) {\r\n            e.target._pinch = {\r\n                p: { distance: distance, date: new Date() },\r\n                pp: {}\r\n            }\r\n            e.target.emit('pinchstart')\r\n            return\r\n        }\r\n        let center = {\r\n            x: (t[0].clientX + t[1].clientX) / 2,\r\n            y: (t[0].clientY + t[1].clientY) / 2\r\n        }\r\n        let now:any = new Date()\r\n        let interval = now - e.target._pinch.p.date\r\n        if (interval < 12) {\r\n            return\r\n        }\r\n        let event = {\r\n            scale: distance / e.target._pinch.p.distance,\r\n            velocity: distance / interval,\r\n            center: center,\r\n            data: e.data\r\n        }\r\n        e.target.emit('pinchmove', event)\r\n        e.target._pinch.pp = {\r\n            distance: e.target._pinch.p.distance,\r\n            date: e.target._pinch.p.date\r\n        }\r\n        e.target._pinch.p = {\r\n            distance: distance,\r\n            date: now\r\n        }\r\n    }\r\n\r\n    // TODO: Inertia Mode\r\n    function end (e) {\r\n        if (e.target._pinch) {\r\n            e.target.emit('pinchend')\r\n        }\r\n        e.target._pinch = null\r\n        e.target.removeListener('touchmove', move)\r\n    }\r\n\r\n    sprite.interactive = true\r\n    sprite\r\n        .on('touchstart', start)\r\n        .on('touchend', end)\r\n        .on('touchendoutside', end)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/Interactions.ts","import {Command, CommandResult, SuccessResult} from \"./Command\";\r\nimport World from \"../World\";\r\nexport default class PlayerLookAt implements Command{\r\n    constructor(public point:{x:number,y:number}, public zoom = 1){\r\n        point.x = Math.floor(point.x);\r\n        point.y = Math.floor(point.y);\r\n    }\r\n\r\n    execute(world:World):CommandResult{\r\n\r\n        var player = world.player();\r\n        player.x = this.point.x - player.width/2;\r\n        player.y = this.point.y - player.height/2;\r\n\r\n\r\n        return SuccessResult;\r\n    }\r\n    canExecute(world:World):CommandResult{\r\n        return SuccessResult;\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/commands/PlayerLookAt.ts","import DisplayObject = PIXI.DisplayObject;\r\nimport {City} from \"../../engine/objectTypes/City\";\r\nimport Util from \"../../util/Util\";\r\nimport CityMenu from \"./CityMenu\";\r\nimport Resources from \"../Resources\";\r\nimport * as PIXI from \"pixi.js\"\r\nimport DebugDraw from \"../controls/DebugDraw\";\r\nimport PaddedContainer from \"../controls/PaddedContainer\";\r\nimport UIContainer from \"../controls/UIContainer\";\r\n\r\nexport default class MenuContainer extends UIContainer{\r\n    background:PIXI.extras.TilingSprite;\r\n    backgroundEdge:PIXI.extras.TilingSprite;\r\n\r\n    currentMenu:PIXI.DisplayObject;\r\n    content:PaddedContainer;\r\n\r\n\r\n    renderRect:{x:number,y:number,width:number,height:number};\r\n\r\n    constructor(public resources:Resources){\r\n        super();\r\n\r\n\r\n        this.background = new PIXI.extras.TilingSprite(resources.menuBackground, this.width, this.height);\r\n        this.backgroundEdge = new PIXI.extras.TilingSprite(resources.menuBorder, resources.menuBorder.width, this.height);\r\n        this.content = new PaddedContainer(10,10,10,10);\r\n\r\n\r\n        this.addChild(this.background);\r\n        this.addChild(this.backgroundEdge);\r\n        this.addChild(this.content);\r\n\r\n\r\n    }\r\n\r\n\r\n    relayout(){\r\n\r\n        this.content.width = this.width;\r\n        this.content.height = this.height;\r\n\r\n        //we will add some padding to the right to make room for hte shadow line\r\n        var edgeWidth = this.backgroundEdge.texture.width;\r\n\r\n        this.background.width = this.width - edgeWidth;\r\n        this.background.height = this.height;\r\n\r\n        this.backgroundEdge.height = this.height;\r\n        this.backgroundEdge.width = edgeWidth;\r\n        this.backgroundEdge.x = this.background.width;\r\n    }\r\n\r\n    showMenu(newMenu:DisplayObject){\r\n        this.content.removeChildren();\r\n        this.content.addChild(newMenu);\r\n    }\r\n\r\n    showCityMenu(city:City){\r\n        this.showMenu(new CityMenu(this.resources, city));\r\n    }\r\n\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/menus/MenuContainer.ts","import {City} from \"../../engine/objectTypes/City\";\r\nimport VerticalContainer from \"../controls/StackContainer\";\r\nimport {Properties} from \"../../engine/objectTypes/Properties\";\r\nimport * as Linq from \"linq\"\r\nimport {XYUtil} from \"../../util/Coordinates\";\r\nimport {VContainer} from \"../controls/StackContainer\";\r\nimport Resources from \"../Resources\";\r\nimport CityHarvest from \"../../engine/commands/CityHarvest\";\r\nimport Util from \"../../util/Util\";\r\nimport {ResourceUtil, Resource} from \"../../engine/objectTypes/Resource\";\r\nimport {HContainer} from \"../controls/StackContainer\";\r\nimport {Spacer} from \"../controls/StackContainer\";\r\nimport {Ship, ShipUtil} from \"../../engine/objectTypes/Ship\";\r\nimport NinePatch from \"../controls/NinePatch\";\r\nimport FillContainer from \"../controls/FillContainer\";\r\nimport UIText from \"../controls/UIText\";\r\nimport UISprite from \"../controls/UISprite\";\r\nimport AlignContainer from \"../controls/AlignContainer\";\r\nimport UIButton from \"../controls/UINinePatchButton\";\r\nimport UIContainer from \"../controls/UIContainer\";\r\nimport ShipBuyResource from \"../../engine/commands/ShipBuyResource\";\r\n\r\n\r\ninterface DataBoundUIElement extends PIXI.DisplayObject{\r\n    refreshDataBindings();\r\n}\r\n\r\nexport default class CityMenu extends VContainer{\r\n\r\n\r\n    constructor(public resources:Resources, public city:City){\r\n        super(20);\r\n\r\n        var updateFn = this.refreshDataBindings.bind(this);\r\n        this.on(\"added\",()=>{\r\n            this.refreshDataBindings();\r\n            this.resources.world.onCommands([CityHarvest, ShipBuyResource], updateFn)\r\n        });\r\n\r\n        this.on(\"removed\", ()=>{\r\n            this.resources.world.offCommands([CityHarvest,ShipBuyResource], updateFn)\r\n        })\r\n\r\n\r\n        this.refreshDataBindings();\r\n\r\n    }\r\n\r\n    buildDataBoundResourceRow(ship:Ship, resourceMeta:Resource):DataBoundUIElement{\r\n        let cityAmountText:UIText;\r\n        let shipAmountText:UIText;\r\n        \r\n        let buyButton:UIButton = new UIButton(this.resources.buySellButton, new UIText(\"Buy\"),()=>{\r\n            this.resources.world.issueCommand(new ShipBuyResource(ship,this.city,resourceMeta))\r\n        });\r\n        \r\n        let sellButton:UIButton  = new UIButton(this.resources.buySellButton, new UIText(\"Sell\"),()=>{\r\n            this.resources.world.issueCommand(new ShipBuyResource(ship,this.city,resourceMeta))\r\n        });;\r\n\r\n        let row = <HContainer & DataBoundUIElement>new HContainer().cells([\r\n            [{flexible:true}, this.buildIcon(resourceMeta, 1.8)],\r\n            [{pixels:20}, new Spacer()],\r\n            [{weight:1}, new VContainer().cells([\r\n                [{weight:1}, new HContainer().cells([\r\n                    [{flexible:true},this.buildIconFromTexture(this.resources.cityIcon)],\r\n                    [{weight:1}, cityAmountText = new UIText(\"\")],\r\n                    [{weight:2}, sellButton]\r\n                ])],\r\n                [{weight:1}, new HContainer().cells([\r\n                    [{flexible:true},this.buildIcon(ship)],\r\n                    [{weight:1}, shipAmountText = new UIText(\"\")],\r\n                    [{weight:2}, buyButton]\r\n                ])]\r\n            ])]\r\n        ]);\r\n\r\n        row.refreshDataBindings = ()=>{\r\n\r\n            let inventoryName = Properties.InventoryPropertyName(resourceMeta.name);\r\n            cityAmountText.text.text = this.city.properties[inventoryName]  || 0+ \"\";\r\n            shipAmountText.text.text = ship.properties[inventoryName] || 0 + \"\"\r\n            cityAmountText.relayout();\r\n            shipAmountText.relayout();\r\n        };\r\n\r\n        return row;\r\n    }\r\n\r\n    rowCache:{[resourceName:string]:DataBoundUIElement} = {}\r\n\r\n    refreshDataBindings() {\r\n\r\n        let resourceMetas = this.resources.world.objectsOfType<Resource>(ResourceUtil.TypeName).toDictionary(r=>r.name);\r\n\r\n        let ship = this.resources.world.objectOfType<Ship>(ShipUtil.TypeName);\r\n\r\n        this.removeChildren();\r\n\r\n        this.addChild(new UIText(`${ShipUtil.TotalResources(ship)} / ${ship.properties.resourceLimit}`))\r\n\r\n        Linq.from(this.city.properties).where(kvp=>Properties.IsInventory(kvp.key)).forEach(kvp=> {\r\n            var resourceName = Properties.InventoryResourceName(kvp.key);\r\n            var resourceAmount = kvp.value;\r\n            var resourceMeta = resourceMetas.get(resourceName);\r\n\r\n            this.rowCache[resourceName] = this.rowCache[resourceName] || this.buildDataBoundResourceRow(ship, resourceMeta);\r\n\r\n            let rowItem = this.rowCache[resourceName];\r\n            rowItem.refreshDataBindings();\r\n            this.cell({pixels:70}, rowItem);\r\n\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n    buildSellButton(){\r\n        let button = new UIButton(this.resources.buySellButton, new UIText(\"Sell\"),()=>{\r\n            console.log(\"sell\");\r\n        });\r\n        return button;\r\n    }\r\n\r\n    buildIcon(obj:{gid:number}, scale = 1):PIXI.DisplayObject{\r\n        if(obj.gid){\r\n            return this.buildIconFromTexture(this.resources.tileTextures[obj.gid]);\r\n        }\r\n        else{\r\n            return new PIXI.Text(obj.gid+\"\")\r\n        }\r\n    }\r\n\r\n    buildIconFromTexture(texture:PIXI.Texture, scale = 1){\r\n        let sprite = new UISprite(texture);\r\n        sprite.sprite.scale.set(scale,scale);\r\n        sprite.relayout();\r\n        return sprite;\r\n    }\r\n\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/menus/CityMenu.ts","import {Command, CommandResult, SuccessResult} from \"./Command\";\r\nimport World from \"../World\";\r\nimport {CityType} from \"../objectTypes/City\";\r\nimport * as Enumerable from \"linq\"\r\nimport {Properties} from \"../objectTypes/Properties\";\r\nimport {TileProperties} from \"../objectTypes/TileProperties\";\r\n\r\n\r\nexport default class CityHarvest implements Command{\r\n    static TypeName = \"CityHarvest\";\r\n\r\n    constructor(){\r\n\r\n    }\r\n\r\n    public static TryApplyProduction(productionProps:{[key:string]:any}, targetProperties:{[key:string]:any}){\r\n        var productionPropertyEnumerable = Enumerable.from(productionProps)\r\n            .where(kvp=>Properties.IsProduction(kvp.key));\r\n\r\n        //if our production requires consumption we will not create anything\r\n        //unless we have the inventory to do so\r\n        var canApply = productionPropertyEnumerable\r\n            .where(kvp=>kvp.value < 0)\r\n            .all(kvp=>{\r\n                var resource = Properties.ProductionResourceName(kvp.key);\r\n                return targetProperties[Properties.InventoryPropertyName(resource)] + kvp.value > 0\r\n            });\r\n        if(!canApply){\r\n            return false\r\n        }\r\n\r\n        //add all the production values to hte inventory\r\n        productionPropertyEnumerable.forEach(kvp=>{\r\n            var resource = Properties.ProductionResourceName(kvp.key);\r\n            return targetProperties[Properties.InventoryPropertyName(resource)] = (targetProperties[Properties.InventoryPropertyName(resource)] || 0) + kvp.value;\r\n        })\r\n\r\n\r\n        return true;\r\n    }\r\n\r\n    executeXXX(world:World):CommandResult{\r\n        // world.objectsOfType(CityType).forEach(city=>{\r\n        //     Enumerable.from(world.tileLayers())\r\n        //         .selectMany(layer=>world.tileGidsInRect(layer,city))\r\n        //         .select(gid=>world.tileProperties(gid))\r\n        //         .forEach(prop=>{\r\n        //             city.properties = city.properties || {};\r\n        //             CityHarvest.TryApplyProduction(prop, city.properties);\r\n        //         });\r\n        // });\r\n\r\n        return SuccessResult;\r\n    }\r\n\r\n    execute(world:World):CommandResult{\r\n        world.objectsOfType(CityType).forEach(city=>{\r\n\r\n            var cityCenter = {\r\n                x:city.x+city.width / 2,\r\n                y:city.y-city.height / 2\r\n            }\r\n            var cityTileIndex = world.getTileIndex(cityCenter);\r\n            world.getExtendedNeighbours(cityTileIndex, function(){return true}).toArray()\r\n            Enumerable.from(world.tileLayers())\r\n                .selectMany(layer=>world\r\n                    .getExtendedNeighbours(cityTileIndex,tileIndex=>{\r\n\r\n                        return tileIndex === cityTileIndex || world.getTilePropertiesFromIndex<TileProperties>(layer,tileIndex).isPartOfCity\r\n                    })\r\n                    .select(tileIndex=>world.getTilePropertiesFromIndex(layer, tileIndex)))\r\n                .forEach(prop=>{\r\n\r\n                    city.properties = city.properties || {};\r\n                    CityHarvest.TryApplyProduction(prop, city.properties);\r\n                });\r\n        });\r\n\r\n        return SuccessResult;\r\n    }\r\n    \r\n    canExecute(world:World):CommandResult{\r\n        return SuccessResult;\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/commands/CityHarvest.ts","\r\nexport class ResourceUtil{\r\n    static TypeName = \"Resource\";\r\n\r\n    static IsResource(layerObj:Tiled.LayerObject): layerObj is Resource{\r\n        return layerObj && layerObj.type === this.TypeName;\r\n    }\r\n\r\n\r\n}\r\nexport interface Resource extends Tiled.LayerObject{\r\n    properties:{\r\n        basePrice:number;\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/objectTypes/Resource.ts","import * as PIXI from \"pixi.js\"\r\nimport Util from \"../../util/Util\";\r\nimport RenderRectContainer from \"./RenderRectContainer\";\r\nimport DebugDraw from \"./DebugDraw\";\r\nimport AlignContainer from \"./AlignContainer\";\r\n\r\nexport default class UIText extends AlignContainer{\r\n\r\n    static DefaultTextStyle = {font: \"bold 20px Tahoma, Geneva, sans-serif\", fill: \"#333\", align: \"center\"};\r\n\r\n    private _text;\r\n    public set text(text:PIXI.Text){\r\n        this.removeChild(this._text);\r\n        this._text = this.addChild(text);\r\n    }\r\n    public get text():PIXI.Text{\r\n        return this._text;\r\n    }\r\n\r\n    constructor(text?: string, style: PIXI.TextStyle = UIText.DefaultTextStyle){\r\n        super();\r\n        this.text = new PIXI.Text(text,style);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/controls/UIText.ts","import * as PIXI from \"pixi.js\"\r\nimport Util from \"../../util/Util\";\r\nimport RenderRectContainer from \"./RenderRectContainer\";\r\nimport DebugDraw from \"./DebugDraw\";\r\nimport UIContainer from \"./UIContainer\";\r\n\r\ninterface AlignContainerOptions{\r\n    horizontalAlign? : \"left\"|\"center\"|\"right\";\r\n    verticalAlign?: \"top\"|\"middle\"|\"bottom\";\r\n}\r\n\r\nexport default class AlignContainer extends UIContainer{\r\n\r\n    constructor(private options:AlignContainerOptions = {}){\r\n        super();\r\n        this.options = options;\r\n    }\r\n\r\n\r\n    relayout(){\r\n        let childrenBounds = this.getChildrenBounds();\r\n        let thisBounds = this.getBounds();\r\n\r\n\r\n\r\n        switch(this.options.horizontalAlign){\r\n            case \"left\":\r\n                this.pivot.x = 0;\r\n                break;\r\n            case \"right\":\r\n                this.pivot.x = -(thisBounds.width - childrenBounds.width);\r\n                break;\r\n            case \"center\":\r\n            default:\r\n                this.pivot.x =  -Math.floor((thisBounds.width - childrenBounds.width) / 2);\r\n                break;\r\n        }\r\n        switch(this.options.verticalAlign){\r\n            case \"top\":\r\n                this.pivot.y = 0;\r\n                break;\r\n            case \"bottom\":\r\n                this.pivot.y =-(thisBounds.height - childrenBounds.height);\r\n                break;\r\n            case \"middle\":\r\n            default:\r\n                this.pivot.y =  -Math.floor((thisBounds.height - childrenBounds.height) / 2);\r\n               break;\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/controls/AlignContainer.ts","import * as PIXI from \"pixi.js\"\r\nimport Util from \"../../util/Util\";\r\nimport RenderRectContainer from \"./RenderRectContainer\";\r\nimport DebugDraw from \"./DebugDraw\";\r\nimport AlignContainer from \"./AlignContainer\";\r\n\r\nexport default class UISprite extends AlignContainer{\r\n\r\n    private _sprite;\r\n    public set sprite(sprite:PIXI.Sprite){\r\n        this.removeChild(this._sprite);\r\n        this._sprite = this.addChild(sprite);\r\n    }\r\n    public get sprite():PIXI.Sprite{\r\n        return this._sprite;\r\n    }\r\n\r\n    constructor(texture?: PIXI.Texture){\r\n        super();\r\n        this.sprite = new PIXI.Sprite(texture);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/controls/UISprite.ts","import * as PIXI from \"pixi.js\"\r\nimport Util from \"../../util/Util\";\r\nimport RenderRectContainer from \"./RenderRectContainer\";\r\nimport DebugDraw from \"./DebugDraw\";\r\nimport AlignContainer from \"./AlignContainer\";\r\nimport NinePatch from \"./NinePatch\";\r\nimport UIText from \"./UIText\";\r\nimport Resources from \"../Resources\";\r\n\r\nimport UIContainer from \"./UIContainer\";\r\nimport * as TWEEN from \"tween.js\";\r\nimport {NinePatchButton} from \"../Resources\";\r\n\r\n\r\nexport default class UINinePatchButton extends UIContainer{\r\n\r\n    upNinePatch:NinePatch;\r\n    downNinePatch:NinePatch;\r\n    content:PIXI.Container;\r\n\r\n    \r\n    constructor(public textures:NinePatchButton, public text:UIText, clickAction?:()=>void) {\r\n        super();\r\n        this.buttonMode = true;\r\n        this.interactive = true;\r\n\r\n        this.upNinePatch = this.addChildWithoutRelayout(new NinePatch(new UIContainer()).loadFromAndroidImage(textures.up));\r\n        this.downNinePatch = this.addChildWithoutRelayout(new NinePatch(new UIContainer()).loadFromAndroidImage(textures.down));\r\n        this.content = this.addChildWithoutRelayout(text);\r\n\r\n        this.downNinePatch.alpha = 1;\r\n\r\n        if(clickAction != null)\r\n            this.on(\"fire\",clickAction,this);\r\n\r\n        this.on(\"mousedown\", this.fire, this);\r\n        \r\n        this.relayout();\r\n    }\r\n\r\n    fire(){\r\n        this.downNinePatch.alpha = 0;\r\n        this.emit(\"fire\")\r\n        new TWEEN.Tween(this.downNinePatch)\r\n            .to({alpha:1},300)\r\n            .start();\r\n    }\r\n\r\n    relayout(){\r\n        this.upNinePatch.width = this.width;\r\n        this.upNinePatch.height = this.height;\r\n\r\n        this.downNinePatch.width = this.width;\r\n        this.downNinePatch.height = this.height;\r\n\r\n        this.content.width = this.upNinePatch.content.width;\r\n        this.content.height = this.upNinePatch.content.height;\r\n\r\n        this.content.x = this.upNinePatch.content.x;\r\n        this.content.y = this.upNinePatch.content.y;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/controls/UINinePatchButton.ts","import * as PIXI from \"pixi.js\"\r\nimport Sprite = PIXI.Sprite;\r\nimport DisplayObject = PIXI.DisplayObject;\r\nimport Util from \"../../util/Util\";\r\nimport DebugDraw from \"./DebugDraw\";\r\nimport UIContainer from \"./UIContainer\";\r\n\r\nexport default class NinePatch extends PIXI.Container{\r\n\r\n\r\n\r\n    private patchRowCount:number;\r\n    private patchColCount:number;\r\n\r\n    private patchSprites:PIXI.Sprite[][] = [];\r\n\r\n    private totalStretchableWidth:number = 0;\r\n    private totalFixedWidth:number = 0;\r\n\r\n    private totalStretchableHeight:number = 0;\r\n    private totalFixedHeight:number = 10;\r\n\r\n    public content:PIXI.Container;\r\n\r\n    private _paddingTop:number =0;\r\n    public get paddingTop() { return this._paddingTop; }\r\n    public set paddingTop(value:number){\r\n        this.setPadding(value, this._paddingRight, this._paddingBottom, this._paddingLeft);\r\n    }\r\n    private _paddingRight:number =0;\r\n    public get paddingRight() { return this._paddingRight; }\r\n    public set paddingRight(value:number){\r\n        this.setPadding(this._paddingTop, value, this._paddingBottom, this._paddingLeft);\r\n    }\r\n    private _paddingBottom:number =0;\r\n    public get paddingBottom() { return this._paddingBottom; }\r\n    public set paddingBottom(value:number){\r\n        this.setPadding(this._paddingTop, this._paddingRight, value, this._paddingLeft);\r\n    }\r\n    private _paddingLeft:number =0;\r\n    public get paddingLeft() { return this._paddingLeft; }\r\n    public set paddingLeft(value:number){\r\n        this.setPadding(this._paddingTop, this._paddingRight, this._paddingBottom, value);\r\n    }\r\n\r\n    private _patches;\r\n    public get patches(){ return this._patches; }\r\n    public set patches(patches:PIXI.Texture[][]){\r\n        this.loadFromPatchArray(patches);\r\n    }\r\n\r\n    public get width() { return this.content.width + this.paddingLeft + this.paddingRight;}\r\n    public set width(value:number) {\r\n        this.content.width = Math.max(0,value - this.paddingLeft - this.paddingRight);\r\n        this.relayout();\r\n    }\r\n    public get height() { return this.content.height + this.paddingTop + this.paddingBottom;}\r\n    public set height(value:number) {\r\n        this.content.height = Math.max(0,value - this.paddingTop - this.paddingBottom);\r\n        this.relayout();\r\n    }\r\n\r\n\r\n    constructor(content:PIXI.Container = new PIXI.Container()){\r\n        super();\r\n\r\n        //add our content, this should always be the last child\r\n        //we will also listen to new children on our content and\r\n        //relayout, new children usually mean the size will change\r\n        this.content = super.addChild(content);\r\n        (<any>this.content).onChildrenChange = ()=>{\r\n            this.relayout();\r\n        };\r\n    }\r\n\r\n    public setPadding(paddingTop:number, paddingRight:number, paddingBottom:number, paddingLeft:number){\r\n        this._paddingTop = paddingTop;\r\n        this._paddingRight = paddingRight;\r\n        this._paddingBottom = paddingBottom;\r\n        this._paddingLeft = paddingLeft;\r\n\r\n        this.relayout();\r\n\r\n        return this;\r\n    }\r\n\r\n    loadFromPatchArray(patches:PIXI.Texture[][]):NinePatch{\r\n        this._patches = patches;\r\n\r\n        //textures changed so remove all sprites except our content\r\n        if(this.children.length > 1)\r\n            super.removeChildren(0, this.children.length-1);\r\n        this.patchSprites = [];\r\n\r\n        this.patchRowCount = patches.length;\r\n        this.patchColCount = patches.length === 0 ? 0 : patches[0].length;\r\n\r\n        //All rows must have same number of pathces\r\n        for(let row=0;row<this.patchRowCount;row++){\r\n            let colsInRow = patches[row].length;\r\n            if(colsInRow != this.patchColCount)\r\n                throw Error(\"All rows must have the same number of patches\");\r\n        }\r\n\r\n        //to continue our processing we need to wait till all the textures are loaded.\r\n        //if any one texture errors, or is not loading we will not show any border\r\n        let patchesToLoad = this.patchRowCount * this.patchColCount;\r\n        let markOnePatchLoaded = ()=>{\r\n            if(--patchesToLoad <= 0)\r\n                this.processLoadedTextures(patches)\r\n        };\r\n        let forgetAboutLoadingImages = function(){\r\n            console.error(\"Failed to load NinePatch texture, keeping all images hidden\", this);\r\n            for(let row=0;row<this.patchRowCount;row++) {\r\n                for (let col = 0; col < this.patchColCount; col++) {\r\n                    let patch = patches[row][col];\r\n                    patch.baseTexture.off(\"loaded\", markOnePatchLoaded);\r\n                    patch.baseTexture.off(\"error\", forgetAboutLoadingImages);\r\n                }\r\n            }\r\n        };\r\n\r\n        for(let row=0;row<this.patchRowCount;row++) {\r\n            for (let col = 0; col < this.patchColCount; col++) {\r\n                let patch = patches[row][col];\r\n                let baseTexture = patch.baseTexture;\r\n\r\n                if(baseTexture.hasLoaded){\r\n                    markOnePatchLoaded();\r\n                }\r\n                else if(baseTexture.isLoading){\r\n                    baseTexture.once(\"loaded\",markOnePatchLoaded);\r\n                    baseTexture.once(\"error\",forgetAboutLoadingImages);\r\n\r\n                }\r\n                else{\r\n                    //not loaded and not going to, will clean up\r\n                    //and forgot about showing any image\r\n                    forgetAboutLoadingImages();\r\n\r\n                    //Hacky double break;\r\n                    row = this.patchRowCount;\r\n                    col = this.patchColCount\r\n                }\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n\r\n    public loadFromAndroidImage(android9PatchImage:PIXI.Texture):NinePatch {\r\n\r\n        let baseTexture = android9PatchImage.baseTexture;\r\n        if (baseTexture.hasLoaded) {\r\n            let data = NinePatch.ExtractDataFromAndroidImageFormatWithLoadedTexture(android9PatchImage);\r\n            this.loadFromPatchArray(data.textures);\r\n            this.setPadding(data.paddingTop,data.paddingRight, data.paddingBottom,data.paddingLeft);\r\n\r\n        }\r\n        else if (baseTexture.isLoading) {\r\n            baseTexture.once(\"loaded\", ()=>{\r\n                let data = NinePatch.ExtractDataFromAndroidImageFormatWithLoadedTexture(android9PatchImage);\r\n                this.loadFromPatchArray(data.textures);\r\n                this.setPadding(data.paddingTop,data.paddingRight, data.paddingBottom,data.paddingLeft);\r\n            });\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    private processLoadedTextures(patches:PIXI.Texture[][]){\r\n        //All patches in a row should have the same height\r\n        for(let row=0;row<this.patchRowCount;row++){\r\n            let rowHeight = this.patchColCount > 0 ? patches[row][0].height : 0;\r\n            for(let col=0;col<this.patchColCount;col++){\r\n                if(rowHeight !== patches[row][col].height)\r\n                    throw Error(\"All patches in a row must have the same height\");\r\n\r\n            }\r\n        }\r\n\r\n        //All patches in a column must have the same width\r\n        for(let col=0;col<this.patchColCount;col++){\r\n            let colWidth = this.patchRowCount > 0 ? patches[0][col].width : 0;\r\n            for(let row=0;row<this.patchRowCount;row++){\r\n                if(colWidth !== patches[row][col].width)\r\n                    throw Error(\"All patches in a column must have the same width\");\r\n            }\r\n        }\r\n\r\n\r\n        //we need to determine how much of the width is stretchable and how much is fixed\r\n        this.totalStretchableWidth = 0;\r\n        this.totalFixedWidth = 0;\r\n        if(this.patchRowCount > 0) {\r\n            for (let col = 0; col < this.patchColCount; col++) {\r\n                let width = patches[0][col].width;\r\n                let stretchX = col % 2 == 1;\r\n                if (stretchX)\r\n                    this.totalStretchableWidth += width;\r\n                else\r\n                    this.totalFixedWidth += width;\r\n            }\r\n        }\r\n\r\n\r\n        //we need to determine how much of the height is stretchable and how much is fixed\r\n        this.totalStretchableHeight = 0;\r\n        this.totalFixedHeight = 0;\r\n        if(this.patchColCount > 0) {\r\n            for (let row = 0; row < this.patchRowCount; row++) {\r\n                let height = patches[row][0].height;\r\n                let stretchY = row % 2 == 1;\r\n                if (stretchY)\r\n                    this.totalStretchableHeight += height;\r\n                else\r\n                    this.totalFixedHeight += height;\r\n            }\r\n        }\r\n\r\n        //Convert our textures into sprites, removing everything but the content\r\n        if(this.children.length > 1)\r\n            super.removeChildren(0,this.children.length-1);\r\n        this.patchSprites = new Array(this.patchRowCount);\r\n        for(let row=0;row<this.patchRowCount;row++){\r\n            this.patchSprites[row] = new Array(this.patchColCount);\r\n            for(let col=0;col<this.patchColCount;col++){\r\n                let sprite = super.addChildAt(new Sprite(patches[row][col]),0); //insert the sprite before the content\r\n                this.patchSprites[row][col] = sprite;\r\n                sprite.anchor.set(0,0);\r\n            }\r\n        }\r\n\r\n        this.relayout();\r\n    }\r\n\r\n    public relayout(){\r\n\r\n        this.content.x = this.paddingLeft;\r\n        this.content.y = this.paddingTop;\r\n\r\n        let targetWidth = this.content.width + this.paddingLeft + this.paddingRight;\r\n        let targetHeight = this.content.height + this.paddingTop + this.paddingBottom;\r\n\r\n        //we wont let the target height be smaller than the original 9patches\r\n        targetWidth = Math.max(targetWidth, this.totalFixedWidth + this.totalStretchableWidth);\r\n        targetHeight = Math.max(targetHeight, this.totalFixedHeight + this.totalStretchableHeight);\r\n\r\n        let runningYOffset = 0;\r\n        for(let row=0;row< this.patchSprites.length;row++){\r\n            let stretchY = row % 2 === 1;\r\n            let runningXOffset = 0;\r\n            for(let col=0;col<this.patchSprites[row].length;col++){\r\n                let stretchX = col % 2 === 1;\r\n\r\n                //stretch our image appropriatly\r\n                let sprite = this.patchSprites[row][col];\r\n                if(stretchX){\r\n                    sprite.width = sprite.texture.width / this.totalStretchableWidth * (targetWidth - this.totalFixedWidth);\r\n                }\r\n                if(stretchY){\r\n                    sprite.height = sprite.texture.height / this.totalStretchableHeight * (targetHeight - this.totalFixedHeight);\r\n                }\r\n\r\n                //position our sprite\r\n                sprite.x = runningXOffset;\r\n                sprite.y = runningYOffset;\r\n                runningXOffset += sprite.width;\r\n            }\r\n\r\n            runningYOffset += this.patchColCount > 0 ? this.patchSprites[row][0].height : 0;\r\n        }\r\n    }\r\n\r\n    getBounds(){\r\n        return new PIXI.Rectangle(\r\n            0,\r\n            0,\r\n            this.content.width + this.paddingLeft+this.paddingRight,\r\n            this.content.height+this.paddingTop+this.paddingBottom);\r\n    }\r\n\r\n\r\n    get contentChildren(){\r\n        //the children array is the only thing I cant forward requests as PIXI uses it internally\r\n        //so when dealing with a NinePatch you should not access children array, instad access\r\n        //the contentChildren array\r\n        return this.content.children;\r\n    }\r\n    set contentChildren(children:PIXI.DisplayObject[]){\r\n        this.content.children = children;\r\n    }\r\n\r\n    addChild<T extends PIXI.DisplayObject>(child:T):T{\r\n        return this.content.addChild.apply(this.content, arguments);\r\n    }\r\n    addChildAt<T extends PIXI.DisplayObject>(child: T, index: number): T{\r\n        return this.content.addChildAt.apply(this.content, arguments);\r\n    }\r\n    swapChildren(child: PIXI.DisplayObject, child2: DisplayObject): void{\r\n        return this.content.swapChildren.apply(this.content, arguments);\r\n    }\r\n    getChildIndex(child: PIXI.DisplayObject): number{\r\n        return this.content.getChildIndex.apply(this.content, arguments);\r\n    }\r\n    setChildIndex(child: PIXI.DisplayObject, index: number): void{\r\n        return this.content.setChildIndex.apply(this.content, arguments);\r\n    }\r\n    getChildAt(index: number): PIXI.DisplayObject{\r\n        return this.content.getChildAt.apply(this.content, arguments);\r\n    }\r\n    removeChild<T extends PIXI.DisplayObject>(child: T): T{\r\n        return this.content.removeChild.apply(this.content, arguments);\r\n    }\r\n    removeChildAt(index: number): PIXI.DisplayObject{\r\n        return this.content.removeChildAt.apply(this.content, arguments);\r\n    }\r\n    removeChildren(beginIndex?: number, endIndex?: number): PIXI.DisplayObject[]{\r\n        return this.content.removeChildren.apply(this.content, arguments);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    private static AndroidNinePatchDataCache:{[key:string]:NinePatchData} = {};\r\n\r\n    private static ExtractDataFromAndroidImageFormatWithLoadedTexture(android9PatchImage:PIXI.Texture):NinePatchData {\r\n\r\n        //try and get hte data out of a cache first, processing these images is not cheap\r\n        let cacheKey = android9PatchImage.baseTexture.imageUrl + \"?\" + [\r\n                \"x=\"+android9PatchImage.frame.x,\r\n                \"y=\"+android9PatchImage.frame.y,\r\n                \"width=\"+android9PatchImage.frame.width,\r\n                \"heigh=\"+android9PatchImage.frame.height\r\n            ].join(\"&\");\r\n        var cacheValue = this.AndroidNinePatchDataCache[cacheKey];\r\n        if(cacheValue)\r\n            return cacheValue;\r\n\r\n\r\n        //we cant access Texture pixel data directly, but we can draw it out to a canvas\r\n        //and access it there\r\n        let canvasRenderer = new PIXI.CanvasRenderer(android9PatchImage.width, android9PatchImage.height, {transparent:true});\r\n        canvasRenderer.render(new PIXI.Sprite(android9PatchImage));\r\n        let ctx = canvasRenderer.rootContext;\r\n\r\n\r\n        let horizontalPixelData = ctx.getImageData(0,0, android9PatchImage.width, 1).data;\r\n        let horizontalMarkers = this.CalculateMarkers(horizontalPixelData,1,1);\r\n\r\n        let verticalPixelData = ctx.getImageData(0,0, 1, android9PatchImage.height).data;\r\n        let verticalMarkers = this.CalculateMarkers(horizontalPixelData,1,1);\r\n\r\n        let horizontalPaddingPixelData = ctx.getImageData(0,android9PatchImage.height-1, android9PatchImage.width, 1).data;\r\n        let horizontalPaddingMarkers = this.CalculateMarkers(horizontalPaddingPixelData,1,1);\r\n        if(horizontalPaddingMarkers.length < 4)\r\n            horizontalPaddingMarkers = horizontalMarkers;\r\n\r\n        let verticalPaddingPixelData = ctx.getImageData(android9PatchImage.width-1,0, 1,android9PatchImage.height).data;\r\n        let verticalPaddingMarkers = this.CalculateMarkers(verticalPaddingPixelData,1,1);\r\n        if(verticalPaddingMarkers.length < 4)\r\n            verticalPaddingMarkers = verticalMarkers;\r\n\r\n\r\n        //we can now turn our horizontal and vertical markers into rectangle frames\r\n        //on the orignal base image\r\n        let textures:PIXI.Texture[][] = new Array(verticalMarkers.length-1);\r\n        for(let vMarkerIndex=0;vMarkerIndex<verticalMarkers.length-1;vMarkerIndex++) {\r\n            textures[vMarkerIndex] = new Array(horizontalMarkers.length-1);\r\n            for (let hMarkerIndex = 0; hMarkerIndex < horizontalMarkers.length - 1; hMarkerIndex++) {\r\n                let rect = new PIXI.Rectangle(\r\n                    horizontalMarkers[hMarkerIndex],\r\n                    verticalMarkers[vMarkerIndex],\r\n                    horizontalMarkers[hMarkerIndex + 1] - horizontalMarkers[hMarkerIndex],\r\n                    verticalMarkers[vMarkerIndex + 1] - verticalMarkers[vMarkerIndex]\r\n                );\r\n                textures[vMarkerIndex][hMarkerIndex] = new PIXI.Texture(android9PatchImage.baseTexture, rect);\r\n            }\r\n        }\r\n\r\n\r\n        //now we turn our padding markers into padding values\r\n\r\n        let paddingTop = 0;\r\n        let paddingRight = 0;\r\n        let paddingBottom = 0;\r\n        let paddingLeft = 0;\r\n\r\n        if(horizontalPaddingMarkers.length >= 4){\r\n            paddingLeft = horizontalPaddingMarkers[1] - horizontalPaddingMarkers[0];\r\n            paddingRight = horizontalPaddingMarkers[horizontalPaddingMarkers.length - 1] - horizontalPaddingMarkers[horizontalPaddingMarkers.length - 2];\r\n        }\r\n        if(verticalPaddingMarkers.length >= 4){\r\n            paddingTop = verticalPaddingMarkers[1] - verticalPaddingMarkers[0];\r\n            paddingBottom = verticalPaddingMarkers[verticalPaddingMarkers.length - 1] - verticalPaddingMarkers[verticalPaddingMarkers.length - 2];\r\n        }\r\n\r\n\r\n        let data = {\r\n            textures:textures,\r\n            paddingTop:paddingTop,\r\n            paddingRight:paddingRight,\r\n            paddingBottom: paddingBottom,\r\n            paddingLeft:paddingLeft\r\n        }\r\n        this.AndroidNinePatchDataCache[cacheKey] = data;\r\n        return data;\r\n    }\r\n\r\n    private static CalculateMarkers(imageData:Uint8ClampedArray, pixelStartOffset:number, pixelEndOffset:number){\r\n        //markers are just positions when the image starts or stops a black line\r\n        //we also add one at the beggining and one at the end\r\n\r\n        let markers = [pixelStartOffset];\r\n        let previousActive = false;\r\n        for(let i=pixelStartOffset*4;i<imageData.length - pixelEndOffset*4;i+=4){\r\n            let isActive =  imageData[i] === 0 && imageData[i+1] === 0 && imageData[i+2] === 0 && imageData[i+3] === 255;\r\n            if(isActive != previousActive)\r\n                markers.push(i/4);\r\n            previousActive = isActive;\r\n        }\r\n        markers.push((imageData.length / 4) - pixelEndOffset);\r\n\r\n        return markers\r\n    }\r\n\r\n}\r\n\r\ninterface NinePatchData {textures:PIXI.Texture[][], paddingTop:number, paddingRight:number, paddingBottom:number, paddingLeft:number};\n\n\n// WEBPACK FOOTER //\n// ./src/ui/controls/NinePatch.ts","import {\r\n    Command, CommandResult, SuccessResult, CityDoesNotHaveRequiredResource,\r\n    ShipDoesNotHaveCapacity\r\n} from \"./Command\";\r\nimport World from \"../World\";\r\nimport {Ship, ShipUtil} from \"../objectTypes/Ship\";\r\nimport {City} from \"../objectTypes/City\";\r\nimport {Properties} from \"../objectTypes/Properties\";\r\nimport {Resource} from \"../objectTypes/Resource\";\r\nimport * as Linq from \"linq\"\r\n\r\nexport default class ShipBuyResource implements Command{\r\n    constructor(public ship:Ship, public city:City, public resource:Resource){\r\n\r\n    }\r\n\r\n    execute(world:World):CommandResult{\r\n\r\n        let canExecute = this.canExecute(world);\r\n        if(!canExecute.isSuccessful)\r\n            return canExecute;\r\n\r\n\r\n        let inventoryName = Properties.InventoryPropertyName(this.resource.name);\r\n\r\n        let shipInventory = this.ship.properties[inventoryName] || 0;\r\n        let cityInventory = this.city.properties[inventoryName] || 0;\r\n\r\n        this.city.properties[inventoryName] = cityInventory-1;\r\n        this.ship.properties[inventoryName] = shipInventory+1;\r\n\r\n        return SuccessResult;\r\n    }\r\n    canExecute(world:World):CommandResult{\r\n        let inventoryName = Properties.InventoryPropertyName(this.resource.name);\r\n\r\n        let cityInventory = this.city.properties[inventoryName] || 0;\r\n        if(cityInventory <= 0)\r\n            return new CityDoesNotHaveRequiredResource(this.city, this.resource.name);\r\n\r\n\r\n        let shipTotalResources = ShipUtil.TotalResources(this.ship);\r\n        if(shipTotalResources >= this.ship.properties.resourceLimit)\r\n            return new ShipDoesNotHaveCapacity(this.ship);\r\n\r\n        \r\n        return SuccessResult;\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/commands/ShipBuyResource.ts","import * as PIXI from \"pixi.js\"\r\nimport Util from \"../../util/Util\";\r\nimport RenderRectContainer from \"./RenderRectContainer\";\r\nimport UIContainer from \"./UIContainer\";\r\n\r\nexport default class PaddedContainer extends UIContainer{\r\n    set paddingTop(value:number){\r\n        this.pivot.y = -value;\r\n        this.relayout();\r\n    }\r\n    get paddingTop(){\r\n        return -this.pivot.y;\r\n    }\r\n\r\n    set paddingLeft(value:number){\r\n        this.pivot.x = -value;\r\n        this.relayout();\r\n    }\r\n    get paddingLeft(){\r\n        return -this.pivot.x;\r\n    }\r\n\r\n    private _paddingRight:number;\r\n    set paddingRight(value:number){\r\n        this._paddingRight = value;\r\n        this.relayout();\r\n    }\r\n    get paddingRight(){\r\n        return this._paddingRight;\r\n    }\r\n\r\n    private _paddingBottom:number;\r\n    set paddingBottom(value:number){\r\n        this._paddingBottom = value;\r\n        this.relayout();\r\n    }\r\n    get paddingBottom(){\r\n        return this._paddingBottom;\r\n    }\r\n\r\n    constructor(paddingTop:number=0, paddingRight:number=0, paddingBottom:number=0, paddingLeft:number=0){\r\n         super();\r\n\r\n        this.pivot.y = -paddingTop;\r\n        this._paddingRight = paddingRight;\r\n        this._paddingBottom = paddingBottom;\r\n        this.pivot.x = -paddingLeft;\r\n\r\n    }\r\n\r\n    relayout() {\r\n        this.children.forEach(child=>{\r\n            let anyChild = <any>child\r\n            if(anyChild.width != null)\r\n                anyChild.width = this.width - this.paddingLeft - this.paddingRight;\r\n            if(anyChild.height != null)\r\n                anyChild.height = this.height - this.paddingTop - this.paddingBottom;\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/controls/PaddedContainer.ts","import * as PIXI from 'pixi.js'\r\nimport {Ship} from \"../../../engine/objectTypes/Ship\";\r\nimport * as TWEEN from \"tween.js\"\r\nimport {XY, XYUtil} from \"../../../util/Coordinates\";\r\nimport ShipMove from \"../../../engine/commands/ShipMove\";\r\nimport Resources from \"../../Resources\";\r\n\r\n\r\nexport default class ShipPathOverlay extends PIXI.Container {\r\n    constructor(public resources:Resources, public ship:Ship) {\r\n        super();\r\n\r\n        this.on(\"added\", this.startListening, this);\r\n        this.on(\"removed\", this.stopListening, this);\r\n\r\n        this.addChild(new ShipPath(resources,ship));\r\n\r\n    }\r\n\r\n    startListening() {\r\n        this.resources.world.onCommand(ShipMove, this.recreatePathIfShipMoveIsThisShip, this);\r\n    }\r\n\r\n    stopListening() {\r\n        this.resources.world.offCommand(ShipMove, this.recreatePathIfShipMoveIsThisShip, this);\r\n    }\r\n\r\n\r\n    recreatePathIfShipMoveIsThisShip(shipMove:ShipMove) {\r\n        if (shipMove.ship === this.ship) {\r\n            this.children.forEach(child=>(<ShipPath>child).animateOut())\r\n            this.addChild(new ShipPath(this.resources, this.ship)).animateIn();\r\n        }\r\n    }\r\n\r\n    animateIn() {\r\n        this.alpha = 0;\r\n        let alpha = {alpha: 0}\r\n        new TWEEN.Tween(alpha).to({alpha: 1}, 100)\r\n            .onUpdate(k=>this.alpha = alpha.alpha)\r\n            .start();\r\n\r\n        return this;\r\n    }\r\n\r\n    animateOut(complete?:()=>void) {\r\n        let alpha = {alpha: 1}\r\n        new TWEEN.Tween(alpha).to({alpha: 0}, 100)\r\n            .onUpdate(k=>this.alpha = alpha.alpha)\r\n            .onComplete(()=> {\r\n                this.parent.removeChild(this)\r\n                if (complete)\r\n                    complete();\r\n            })\r\n            .start();\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\nclass ShipPath extends PIXI.Container{\r\n    private _ship;\r\n    public get ship() {\r\n        return this._ship;\r\n    }\r\n\r\n    private static Shadow = (function () {\r\n        // let filter = new PIXI.filters.DropShadowFilter();\r\n        // filter.distance = 4;\r\n        // filter.color = 0x333333;\r\n        // return filter;\r\n\r\n        return null;\r\n    })();\r\n\r\n    private static Blur = (function () {\r\n        let filter = new PIXI.filters.BlurFilter();\r\n        filter.blur = 0.2;\r\n        return filter\r\n    })();\r\n\r\n    private moveFromPath:PIXI.Graphics;\r\n    private moveFromPathMask:PIXI.Graphics;\r\n    private moveToPath:PIXI.Graphics;\r\n    private moveToPathMask:PIXI.Graphics;\r\n    removing:boolean = false;\r\n\r\n    constructor(public resources:Resources, ship:Ship) {\r\n        super();\r\n        this._ship = ship;\r\n\r\n        this.moveFromPath = this.addChild(new PIXI.Graphics());\r\n        this.moveFromPath.filters = [ShipPath.Blur];\r\n        this.moveFromPathMask = this.addChild(new PIXI.Graphics());\r\n        this.moveFromPath.mask = this.moveFromPathMask;\r\n\r\n        this.moveToPath = this.addChild(new PIXI.Graphics());\r\n        this.moveToPath.filters = [ShipPath.Blur];\r\n        this.moveToPathMask = this.addChild(new PIXI.Graphics());\r\n        this.moveToPath.mask = this.moveToPathMask;\r\n\r\n        this.on(\"added\", this.startListening, this);\r\n        this.on(\"removed\", this.stopListening, this);\r\n\r\n        this.refreshPath();\r\n\r\n    }\r\n\r\n    startListening() {\r\n        PIXI.ticker.shared.add(this.refreshPathProgress, this);\r\n    }\r\n\r\n    stopListening() {\r\n        PIXI.ticker.shared.remove(this.refreshPathProgress, this);\r\n    }\r\n\r\n\r\n    refreshPathIfShipMoveIsThisShip(shipMove:ShipMove) {\r\n        if (shipMove.ship === this.ship)\r\n            this.refreshPath();\r\n    }\r\n\r\n    animateIn() {\r\n        this.alpha = 0;\r\n        let alpha = {alpha: 0}\r\n        new TWEEN.Tween(alpha).to({alpha: 1}, 200)\r\n            .onUpdate(k=>this.alpha = alpha.alpha)\r\n            .start();\r\n\r\n        return this;\r\n    }\r\n\r\n    animateOut(complete?:()=>void) {\r\n        let alpha = {alpha: this.alpha};\r\n        this.removing = true;\r\n        new TWEEN.Tween(alpha).to({alpha: 0}, 200)\r\n            .onUpdate(k=>this.alpha = alpha.alpha)\r\n            .onComplete(()=> {\r\n                this.parent.removeChild(this)\r\n                if (complete)\r\n                    complete();\r\n            })\r\n            .start();\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    refreshPath() {\r\n        let fullPath = this.ship.properties._moveFromPoints.concat(this.ship.properties._moveToPoints);\r\n\r\n        //we will draw the line back ward so the end can always hav a dot and a space\r\n        fullPath.reverse();\r\n        this.moveToPath.clear();\r\n        this.moveToPath.lineStyle(12, 0x00FF00, 1);\r\n        this.drawDashedSpline(this.moveToPath, fullPath);\r\n        if (fullPath.length > 0) {\r\n            let lastPoint = fullPath[0];\r\n            this.moveToPath.beginFill(0x00FF00);\r\n            this.moveToPath.drawCircle(lastPoint.x, lastPoint.y, 4);\r\n            this.moveToPath.endFill();\r\n        }\r\n\r\n\r\n        this.moveFromPath.clear();\r\n        this.moveFromPath.lineStyle(12, 0x00FF00, 0.3);\r\n        this.drawDashedSpline(this.moveFromPath, fullPath);\r\n\r\n\r\n        this.refreshPathProgress();\r\n    }\r\n\r\n    refreshPathProgress() {\r\n\r\n        //if there is no path to draw we will remove ourselves\r\n        if (this.ship.properties._moveToPoints.length === 0 && this.ship.properties._moveFromPoints.length === 0) {\r\n            if(!this.removing)\r\n                this.animateOut();\r\n            return;\r\n        }\r\n\r\n        this.moveFromPathMask.clear();\r\n        this.moveFromPathMask.lineStyle(24, 0xFFFFFF, 1);\r\n        this.drawSolidLine(this.moveFromPathMask, this.ship.properties._moveFromPoints, null, this.ship);\r\n\r\n        this.moveToPathMask.clear();\r\n        this.moveToPathMask.lineStyle(24, 0xFFFFFF, 1);\r\n        this.drawSolidLine(this.moveToPathMask, this.ship.properties._moveToPoints, this.ship, null);\r\n        if (this.ship.properties._moveToPoints.length > 0) {\r\n            let lastPoint = this.ship.properties._moveToPoints[this.ship.properties._moveToPoints.length - 1];\r\n            this.moveToPathMask.beginFill(0xFFFFFF);\r\n            this.moveToPathMask.drawCircle(lastPoint.x, lastPoint.y, 4);\r\n            this.moveToPathMask.endFill();\r\n        }\r\n    }\r\n\r\n    private drawSolidLine(graphics:PIXI.Graphics, path:{x:number,y:number}[], firstPoint?:XY, lastPoint?:XY) {\r\n        //its a bit odd to have first and last point arguments. This was done prevent having to build a new\r\n        //array when calling this method. this method is called on every animation frame\r\n\r\n        if (path.length === 0)\r\n            return;\r\n\r\n        let iStart = 0;\r\n        if (firstPoint != null) {\r\n            graphics.moveTo(firstPoint.x, firstPoint.y);\r\n            iStart = 0;\r\n        } else {\r\n            graphics.moveTo(path[0].x, path[0].y);\r\n            iStart = 1;\r\n        }\r\n\r\n        for (let i = iStart; i < path.length; i++) {\r\n            graphics.lineTo(path[i].x, path[i].y);\r\n        }\r\n\r\n        if (lastPoint != null)\r\n            graphics.lineTo(lastPoint.x, lastPoint.y);\r\n    }\r\n\r\n    private drawDashedSpline(graphics:PIXI.Graphics, path:{x:number,y:number}[]) {\r\n\r\n        if (path.length === 0)\r\n            return;\r\n\r\n        //high resolution will give nicer turns in the line and make the line\r\n        //segments more equal in length, but slows down processing\r\n        let resolution = 4;\r\n\r\n        let dashLineSize = 20;\r\n        let gapLineSize = 10;\r\n\r\n        //we are abusing a tween to do all the interpolation here for us\r\n        //we set up the tween and manually update its time and draw the lines\r\n        let point = {x: path[0].x, y: path[0].y};\r\n        let totalProgress = path.length * resolution;\r\n        let abusedTween = new TWEEN.Tween(point)\r\n            .to({x: path.map(p=>p.x), y: path.map(p=>p.y)}, totalProgress)\r\n            .interpolation(TWEEN.Interpolation.CatmullRom);\r\n        TWEEN.remove(abusedTween);\r\n\r\n\r\n        graphics.moveTo(point.x, point.y);\r\n        let isLineDrawing = false;\r\n        let drawingLength = 0;\r\n        let previousPoint = {x: point.x, y: point.y};\r\n\r\n        for (let progress = 1; progress < totalProgress; progress++) {\r\n\r\n            abusedTween.update(progress);\r\n            if (isLineDrawing) {\r\n                graphics.lineTo(point.x, point.y);\r\n            }\r\n            else {\r\n                graphics.moveTo(point.x, point.y);\r\n            }\r\n            drawingLength += XYUtil.distance(previousPoint, point);\r\n            if (drawingLength > (isLineDrawing ? dashLineSize : gapLineSize)) {\r\n                isLineDrawing = !isLineDrawing;\r\n                drawingLength = 0;\r\n            }\r\n\r\n\r\n            previousPoint.x = point.x;\r\n            previousPoint.y = point.y;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/display/overlay/ShipPathOverlay.ts","import {\r\n    Command, CommandResult, SuccessResult, CityDoesNotHaveRequiredResource,\r\n    ShipDoesNotHaveCapacity\r\n} from \"./Command\";\r\nimport World from \"../World\";\r\nimport {Ship, ShipUtil} from \"../objectTypes/Ship\";\r\nimport {City} from \"../objectTypes/City\";\r\nimport {Properties} from \"../objectTypes/Properties\";\r\nimport {Resource} from \"../objectTypes/Resource\";\r\nimport * as Linq from \"linq\"\r\nimport * as TWEEN from \"tween.js\";\r\nexport default class ShipMove implements Command{\r\n    constructor(public ship:Ship, public destinationPoint:{x:number,y:number}){\r\n\r\n    }\r\n\r\n    execute(world:World):CommandResult{\r\n\r\n        let canExecute = this.canExecute(world);\r\n        if(!canExecute.isSuccessful)\r\n            return canExecute;\r\n\r\n        if(this.ship.properties._moveTween){\r\n            world.tweens.remove(this.ship.properties._moveTween);\r\n        }\r\n\r\n        let pointRoute = world.findPointRoute(this.ship, this.destinationPoint, (tileIndex)=>world.isMovementAllowed(tileIndex));\r\n        if(pointRoute.path.length > 0 && pointRoute.path[0].x === this.ship.x && pointRoute.path[0].y === this.ship.y)\r\n            pointRoute.path.shift();\r\n\r\n        this.ship.properties._moveToPoints = pointRoute.path;\r\n        this.ship.properties._moveFromPoints = this.ship.properties._moveFromPoints || [];\r\n\r\n\r\n\r\n        let xPoints = pointRoute.path.map(p=>p.x);\r\n        let yPoints = pointRoute.path.map(p=>p.y);\r\n        let pointsTravelled = 0;\r\n\r\n        let tween = world.tweens.add(new TWEEN.Tween(this.ship).to({x:xPoints,y:yPoints},pointRoute.distance * 30)\r\n            .easing(TWEEN.Easing.Linear.None)\r\n            .interpolation(TWEEN.Interpolation.CatmullRom)\r\n            .onUpdate(progress=>{\r\n                let pointsTravelledOnUpdate = Math.floor(progress * xPoints.length);\r\n                let newPointsTravelled = pointsTravelledOnUpdate - pointsTravelled;\r\n\r\n                let travelledPoints = this.ship.properties._moveToPoints.splice(0,newPointsTravelled);\r\n                this.ship.properties._moveFromPoints.push.apply(this.ship.properties._moveFromPoints,travelledPoints);\r\n\r\n                pointsTravelled = pointsTravelledOnUpdate;\r\n            })\r\n            .onComplete(progress=>{\r\n                this.ship.properties._moveFromPoints = [];\r\n                this.ship.properties._moveFromPoints = [];\r\n            })\r\n            .start(world.clock.time));\r\n\r\n        this.ship.properties._moveTween = tween;\r\n\r\n        //\r\n        // let points = tileIndexPath.map(tileIndex=>world.getTilePoint(tileIndex));\r\n        // this.ship.properties._movePointPath = points;\r\n        // //our ship is anchored at bottom left, so we need to move our x/y points away from center tile\r\n        // let xPoints = points.map(p=>p.x-this.ship.width/2);\r\n        // let yPoints = points.map(p=>p.y+this.ship.width/2);\r\n        //\r\n        //\r\n        //\r\n        // let tween = world.tweens.add(new TWEEN.Tween(this.ship).to({x:xPoints,y:yPoints},points.length * 1000)\r\n        //     .easing(TWEEN.Easing.Linear.None)\r\n        //     .interpolation(TWEEN.Interpolation.CatmullRom)\r\n        //     .onUpdate(progress=>this.ship.properties._moveProgress = progress)\r\n        //     .start(world.clock.time));\r\n        //\r\n        //\r\n\r\n        // let tileIndexes = [100,1];\r\n        //\r\n        // let firstTween;\r\n        // let previousTween;\r\n        // for(let i=0;i<tileIndexes.length;i++){\r\n        //     let destinationTileIndex = tileIndexes[i];\r\n        //     let targetPoint = world.getTilePoint(destinationTileIndex);\r\n        //\r\n        //     let tween = new TWEEN.Tween(this.ship).to(targetPoint,10000);\r\n        //     if(firstTween == null){\r\n        //         tween = tween.easing(TWEEN.Easing.Quadratic.In);\r\n        //         firstTween = tween;\r\n        //     }\r\n        //     if(previousTween != null){\r\n        //         previousTween.chain(tween);\r\n        //     }\r\n        //\r\n        //     previousTween = tween;\r\n        //\r\n        // }\r\n        //\r\n        // world.tweens.add(firstTween.start(world.clock.time));\r\n\r\n\r\n        return SuccessResult;\r\n    }\r\n    canExecute(world:World):CommandResult{\r\n        \r\n        \r\n        return SuccessResult;\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/commands/ShipMove.ts","import * as PIXI from 'pixi.js'\r\nimport {Ship} from \"../../../engine/objectTypes/Ship\";\r\nimport * as TWEEN from \"tween.js\"\r\nimport {XY, XYUtil} from \"../../../util/Coordinates\";\r\nimport {ImageButton, default as Resources} from \"../../Resources\";\r\nimport {City, CityUtil} from \"../../../engine/objectTypes/City\";\r\nimport ShipMove from \"../../../engine/commands/ShipMove\";\r\nimport * as Linq from \"linq\"\r\n\r\nexport default class ShipTravelPointsOverlay extends PIXI.Container{\r\n\r\n    private _ship;\r\n    public get ship(){\r\n        return this._ship;\r\n    }\r\n\r\n    private static Shadow = (function(){\r\n        // let filter = new PIXI.filters.DropShadowFilter();\r\n        // filter.distance = 4;\r\n        // filter.color = 0x333333;\r\n        // return filter\r\n        return null;\r\n    })();\r\n\r\n    private static Blur = (function(){\r\n        let filter = new PIXI.filters.BlurFilter();\r\n        filter.blur = 0;\r\n        return filter\r\n    })();\r\n\r\n    constructor(public resources:Resources, ship:Ship){\r\n        super();\r\n        this._ship = ship;\r\n\r\n        this.on(\"added\", this.startListening, this);\r\n        this.on(\"removed\", this.stopListening, this);\r\n    }\r\n\r\n    startListening(){\r\n        this.resources.world.onCommand(ShipMove, this.refreshIfShipMoveIsThisShip, this);\r\n        PIXI.ticker.shared.add(this.refresh, this);\r\n    }\r\n\r\n    stopListening(){\r\n        this.resources.world.offCommand(ShipMove, this.refreshIfShipMoveIsThisShip, this);\r\n        PIXI.ticker.shared.remove(this.refresh, this);\r\n    }\r\n\r\n    refreshIfShipMoveIsThisShip(shipMove:ShipMove){\r\n        if(shipMove.ship === this.ship)\r\n            this.refresh();\r\n    }\r\n\r\n    public animateIn(){\r\n        this.refresh();\r\n        return this;\r\n    }\r\n\r\n    public animateOut(complete?:()=>void){\r\n        let childCount = this.children.length;\r\n        let onChildRemove = ()=>{\r\n            if(--childCount === 0) {\r\n                this.parent.removeChild(this);\r\n                if(complete)\r\n                    complete();\r\n            }\r\n        }\r\n        this.children.forEach((child)=>{\r\n            let anyChild = <any>child;\r\n            if(anyChild.animateOut) {\r\n                anyChild.animateOut(onChildRemove);\r\n            }\r\n            else{\r\n                this.removeChild(child);\r\n                onChildRemove();\r\n            }\r\n        });\r\n        return this;\r\n    }\r\n\r\n    public refresh(){\r\n        let world = this.resources.world;\r\n\r\n\r\n        world.objectsOfType<City>(CityUtil.TypeName).forEach(city=>{\r\n\r\n            let cityTileIndex = world.getTileIndex(city);\r\n\r\n            let shouldBeHidden = false;\r\n\r\n            //we wont draw travel items to places where the ship already is\r\n            shouldBeHidden = shouldBeHidden || world.getTileIndex(this.ship) === cityTileIndex\r\n\r\n            //if the boat is already travelling to the location we will also not show the button\r\n            let destinationPoint = this.ship.properties._moveToPoints[this.ship.properties._moveToPoints.length -1];\r\n            shouldBeHidden = shouldBeHidden || (destinationPoint && world.getTileIndex(destinationPoint)=== cityTileIndex);\r\n\r\n           let children = Linq.from(this.children).cast<TravelToButton>();\r\n\r\n            //remove children that are there but shouldnt be\r\n            children.where(child=>child.x === city.x && child.y === city.y && shouldBeHidden && !child.removing).forEach(child=>{\r\n                child.animateOut()\r\n            });\r\n\r\n            //add children that are not there but should be\r\n            if(!children.any(child=>child.x === city.x && child.y === city.y && !child.removing) && !shouldBeHidden){\r\n                let travelButton = this.addChild(new TravelToButton(this.resources.moveButton,()=>{\r\n                    world.issueCommand(new ShipMove(this.ship,city))\r\n                })).animateIn();\r\n                travelButton.x = city.x;\r\n                travelButton.y = city.y;\r\n            }\r\n\r\n        })\r\n\r\n    }\r\n}\r\n\r\nexport class TravelToButton extends PIXI.Sprite{\r\nremoving:boolean = false;\r\n\r\n\r\n    constructor(public textures:ImageButton, clickAction?:()=>void) {\r\n        super(textures.up);\r\n        this.buttonMode = true;\r\n        this.interactive = true;\r\n\r\n        this.anchor.x = 0.5;\r\n        this.anchor.y = 0.5;\r\n\r\n\r\n\r\n        if(clickAction != null)\r\n            this.on(\"fire\",clickAction,this);\r\n\r\n\r\n        let preventDefault = function(e){e.stopPropagation();};\r\n        this.on(\"mousedown\", preventDefault);\r\n        this.on(\"mouseup\", preventDefault);\r\n        this.on(\"click\", preventDefault);\r\n\r\n        this.on(\"mouseup\", this.fire, this);\r\n\r\n    }\r\n\r\n    fire(e){\r\n        this.emit(\"fire\")\r\n        this.texture = this.textures.down;\r\n    }\r\n\r\n\r\n    animateIn(){\r\n        this.alpha = 0;\r\n        let alpha = {alpha:0}\r\n        new TWEEN.Tween(alpha).to({alpha:1}, 150)\r\n            .onUpdate(k=>this.alpha = alpha.alpha)\r\n            .start();\r\n\r\n        return this;\r\n    }\r\n\r\n    animateOut(complete?:()=>void){\r\n        this.removing = true;\r\n        let alpha = {alpha:1}\r\n        new TWEEN.Tween(alpha).to({alpha:0}, 150)\r\n            .onUpdate(k=>this.alpha = alpha.alpha)\r\n            .onComplete(()=>{\r\n                this.parent.removeChild(this);\r\n                if(complete)\r\n                    complete.call(this);\r\n            })\r\n            .start();\r\n\r\n        return this;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/display/overlay/ShipTravelPointsOverlay.ts"],"sourceRoot":""}